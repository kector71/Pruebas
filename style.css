/* ================== VARIABLES DE TEMA ================== */
:root {
    /* === Core Colors === */
    --bg-color: #fafbfc;
    --text-color: #1a202c;
    --text-muted: #64748b;
    --header-border-color: rgba(0, 0, 0, 0.08);
    --header-x-fill: #1a202c;

    /* === Surface & Borders === */
    --material-surface-light: #ffffff;
    --material-surface-border: rgba(0, 0, 0, 0.08);
    --material-surface-light-rgb: 255, 255, 255;

    /* === Inputs === */
    --input-bg: #f1f5f9;
    --input-focus-border: #3b82f6;
    --input-focus-border-rgb: 59, 130, 246;

    /* === Primary Actions === */
    --btn-primary-bg: #ef4444;
    --btn-primary-text: #ffffff;
    --btn-primary-hover-bg: #dc2626;
    --btn-primary-shadow: 0 4px 12px rgba(239, 68, 68, 0.25);

    /* === Elevations & Shadows === */
    --card-inset-highlight: inset 0 1px 0 rgba(255, 255, 255, 0.8);
    --elevation-1: 0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04);
    --elevation-2: 0 4px 6px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.05);
    --elevation-3: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
    --elevation-4: 0 20px 25px rgba(0, 0, 0, 0.1), 0 10px 10px rgba(0, 0, 0, 0.04);
    --elevation-hover: 0 12px 40px rgba(59, 130, 246, 0.12), 0 6px 12px rgba(0, 0, 0, 0.08);

    /* === Interactive === */
    --material-ripple-light: rgba(0, 0, 0, 0.1);
    --btn-google-border: #d1d5db;
    --btn-google-hover-bg: rgba(0, 0, 0, 0.04);

    /* === Icons === */
    --icon-sun-stroke: #1a202c;
    --icon-moon-stroke: #fff;
    --icon-palette-stroke: #1a202c;
    --icon-arrow-stroke: #3b82f6;
    --icon-info-stroke: #1a202c;
    --icon-menu-stroke: #1a202c;
    --arrow-glow-animation: arrow-glow 1.5s ease-in-out infinite alternate;

    /* === Badge Colors === */
    --badge-menta-bg: #d1fae5;
    --badge-menta-text: #065f46;
    --badge-delantera-bg: #f97316;
    --badge-delantera-text: #fff;
    --badge-trasera-bg: #a855f7;
    --badge-trasera-text: #fff;

    /* === Skeleton === */
    --skeleton-bg: #e2e8f0;
    --skeleton-highlight: #f1f5f9;

    /* === Watermark === */
    --watermark-mask-color: rgba(0, 0, 0, 0.03);

    /* === Accent Colors (Refined Palette) === */
    --accent-blue: #3b82f6;
    --accent-blue-light: #60a5fa;
    --accent-red: #ef4444;
    --accent-red-light: #f87171;
    --accent-purple: #a855f7;
    --accent-purple-light: #c084fc;
    --accent-orange: #f97316;
    --accent-orange-light: #fb923c;
    --accent-green: #10b981;
    --accent-green-light: #34d399;
    --accent-cyan: #06b6d4;
    --accent-cyan-light: #22d3ee;

    /* === Transitions === */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-bounce: 500ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* === MODO OSCURO AMOLED === */
body.lp-dark {
    /* === Core Colors === */
    --text-color: #e2e8f0;
    --text-muted: #94a3b8;
    --bg-color: #000000;
    --header-border-color: rgba(255, 255, 255, 0.08);
    --header-x-fill: #e2e8f0;

    /* === Surface & Borders === */
    --material-surface-light: #0a0a0a;
    --material-surface-border: rgba(255, 255, 255, 0.12);
    --material-surface-light-rgb: 10, 10, 10;

    /* === Inputs === */
    --input-bg: #1a1a1a;
    --input-focus-border: #60a5fa;
    --input-focus-border-rgb: 96, 165, 250;

    /* === Primary Actions === */
    --btn-primary-bg: #dc2626;
    --btn-primary-hover-bg: #b91c1c;
    --btn-primary-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);

    /* === Elevations & Shadows === */
    --card-inset-highlight: inset 0 1px 0 rgba(255, 255, 255, 0.05);
    --elevation-1: 0 1px 3px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.05);
    --elevation-2: 0 4px 6px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.05);
    --elevation-3: 0 10px 15px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05);
    --elevation-4: 0 20px 25px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05);
    --elevation-hover: 0 12px 40px rgba(96, 165, 250, 0.15), 0 6px 12px rgba(0, 0, 0, 0.3);

    /* === Interactive === */
    --material-ripple-dark: rgba(255, 255, 255, 0.08);
    --btn-google-border: #374151;
    --btn-google-hover-bg: rgba(255, 255, 255, 0.06);

    /* === Icons === */
    --icon-sun-stroke: #e2e8f0;
    --icon-moon-stroke: #e2e8f0;
    --icon-palette-stroke: #e2e8f0;
    --icon-arrow-stroke: #f87171;
    --icon-info-stroke: #e2e8f0;
    --icon-menu-stroke: #e2e8f0;
    --arrow-glow-animation: arrow-glow-dark 1.5s ease-in-out infinite alternate;

    /* === Badge Colors === */
    --badge-menta-bg: rgba(52, 211, 153, 0.15);
    --badge-menta-text: #34d399;
    --badge-delantera-bg: #fb923c;
    --badge-delantera-text: #ffffff;
    --badge-trasera-bg: #c084fc;
    --badge-trasera-text: #ffffff;

    /* === Skeleton === */
    --skeleton-bg: #1a1a1a;
    --skeleton-highlight: #2a2a2a;

    /* === Watermark === */
    --watermark-mask-color: rgba(255, 255, 255, 0.04);

    /* === Accent Colors === */
    --accent-blue: #60a5fa;
    --accent-blue-light: #93c5fd;
    --accent-red: #f87171;
    --accent-red-light: #fca5a5;
    --accent-purple: #c084fc;
    --accent-purple-light: #d8b4fe;
    --accent-orange: #fb923c;
    --accent-orange-light: #fdba74;
    --accent-green: #34d399;
    --accent-green-light: #6ee7b7;
    --accent-cyan: #22d3ee;
    --accent-cyan-light: #67e8f9;
}

/* === MODO ORBITAL === */
body.modo-orbital {
    /* === Core Colors === */
    --bg-color: #0f172a;
    --text-color: #cbd5e1;
    --text-muted: #94a3b8;
    --header-x-fill: #f1f5f9;
    --header-border-color: rgba(59, 130, 246, 0.15);

    /* === Surface & Borders === */
    --material-surface-light: #1e293b;
    --material-surface-border: rgba(59, 130, 246, 0.2);
    --material-surface-light-rgb: 30, 41, 59;

    /* === Inputs === */
    --input-bg: #334155;
    --input-focus-border: #3b82f6;
    --input-focus-border-rgb: 59, 130, 246;

    /* === Primary Actions === */
    --btn-primary-bg: #ef4444;
    --btn-primary-hover-bg: #dc2626;
    --btn-primary-text: #ffffff;
    --btn-primary-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);

    /* === Elevations & Shadows === */
    --card-inset-highlight: inset 0 1px 0 rgba(59, 130, 246, 0.1);
    --elevation-1: 0 1px 3px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(59, 130, 246, 0.1);
    --elevation-2: 0 4px 6px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(59, 130, 246, 0.15);
    --elevation-3: 0 10px 15px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(59, 130, 246, 0.2);
    --elevation-4: 0 20px 25px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(59, 130, 246, 0.25);
    --elevation-hover: 0 12px 40px rgba(59, 130, 246, 0.2), 0 6px 12px rgba(0, 0, 0, 0.4);

    /* === Interactive === */
    --material-ripple-dark: rgba(59, 130, 246, 0.15);
    --btn-google-border: #475569;
    --btn-google-hover-bg: rgba(59, 130, 246, 0.08);

    /* === Icons === */
    --icon-sun-stroke: #cbd5e1;
    --icon-moon-stroke: #cbd5e1;
    --icon-palette-stroke: #cbd5e1;
    --icon-arrow-stroke: #3b82f6;
    --icon-info-stroke: #cbd5e1;
    --icon-menu-stroke: #cbd5e1;
    --arrow-glow-animation: arrow-glow-orbital 1.5s ease-in-out infinite alternate;

    /* === Badge Colors === */
    --badge-menta-bg: rgba(52, 211, 153, 0.12);
    --badge-menta-text: #34d399;
    --badge-delantera-bg: #fb923c;
    --badge-delantera-text: #ffffff;
    --badge-trasera-bg: #c084fc;
    --badge-trasera-text: #ffffff;

    /* === Skeleton === */
    --skeleton-bg: #1e293b;
    --skeleton-highlight: #334155;

    /* === Watermark === */
    --watermark-mask-color: rgba(203, 213, 225, 0.04);

    /* === Accent Colors === */
    --accent-blue: #3b82f6;
    --accent-blue-light: #60a5fa;
    --accent-red: #ef4444;
    --accent-red-light: #f87171;
    --accent-purple: #a855f7;
    --accent-purple-light: #c084fc;
    --accent-orange: #f97316;
    --accent-orange-light: #fb923c;
    --accent-green: #10b981;
    --accent-green-light: #34d399;
    --accent-cyan: #06b6d4;
    --accent-cyan-light: #22d3ee;
}

.lp-icon-palette {
    stroke: var(--icon-palette-stroke);
}

.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    margin: -1px;
    padding: 0;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    height: 100%;
    scroll-behavior: smooth;
    scroll-padding-top: 80px;
    /* Espacio para header fixed si existe */
}

/* Optimizaci칩n para scroll animations */
@media (prefers-reduced-motion: no-preference) {
    html {
        scroll-behavior: smooth;
    }
}

body {
    background: var(--bg-color);
    transition: background var(--transition-slow), color var(--transition-slow);
    color: var(--text-color);
    padding-top: 0.5rem;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    font-size: 14px;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
}


/* ========================================
   HEADER - Clean Professional Design
   ======================================== */
header {
    width: 100%;
    max-width: 100%;
    margin: 0 auto 1.5rem auto;
    background: rgba(var(--material-surface-light-rgb), 0.8);
    backdrop-filter: blur(10px) saturate(120%);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
    border-bottom: 1px solid var(--header-border-color);
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
    padding: 1rem 1.5rem;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 1.5rem;
    transition: all var(--transition-base);
}

.header-left-controls {
    display: flex;
    align-items: center;
    flex-shrink: 0;
}

.header-menu-btn {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-color);
    transition: all var(--transition-base);
    background: transparent;
    border-radius: 10px;
    border: 1px solid var(--material-surface-border);
}

.header-menu-btn svg {
    width: 18px;
    height: 18px;
}

.header-menu-btn:hover {
    transform: translateY(-1px);
    background-color: var(--btn-google-hover-bg);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
}

header h1 {
    font-family: 'Orbitron', sans-serif;
    font-size: 26px;
    font-weight: 700;
    letter-spacing: 1px;
    color: inherit;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 12px;
    flex-wrap: wrap;
    flex: 0 1 auto;
    margin: 0;
    padding: 0;
    line-height: 1.2;
    animation: fadeDown 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s forwards;
    opacity: 0;
}

@keyframes fadeDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.header-subtitle {
    font-family: 'Inter', sans-serif;
    font-size: 0.72rem;
    /* +15% sobre el reducido */
    font-weight: 500;
    color: var(--text-muted);
    opacity: 1;
    border-left: 1px solid var(--material-surface-border);
    padding-left: 9.7px;
    /* +15% sobre el reducido */
    margin-left: 3.2px;
    /* +15% sobre el reducido */
    line-height: 1.4;
}

body.lp-dark .header-subtitle,
body.modo-orbital .header-subtitle {
    opacity: 0.85;
}

header .header-x {
    height: 0.72em;
    /* +15% sobre el reducido */
    width: auto;
    display: inline-block;
    transition: transform 0.6s ease;
}

header .header-x path {
    fill: var(--header-x-fill);
    transition: fill 0.5s ease;
}

.material-btn {
    position: relative;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--material-surface-light);
    color: var(--text-color);
    box-shadow: var(--elevation-2);
    cursor: pointer;
    overflow: hidden;
    transition: box-shadow 0.3s ease, background-color 0.5s ease, opacity 0.3s ease, transform 0.3s ease, border-color 0.5s ease;
    border: 1px solid var(--material-surface-border);
    outline: none;
    padding: 0;
}

.material-btn:hover {
    box-shadow: var(--elevation-4);
}

.header-menu-btn {
    display: flex;
    align-items: center;
    justify-content: center;
}

.header-menu-btn svg {
    width: 20px;
    height: 20px;
    stroke: var(--icon-menu-stroke);
    position: static;
    transform: none;
    transition: stroke 0.5s ease;
}

.header-left-controls {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
}

.floating-buttons-container {
    position: fixed;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.floating-buttons-container.left {
    left: 18px;
    bottom: 18px;
}

.floating-buttons-container.right {
    right: 18px;
    bottom: 18px;
}

.floating-buttons-container .material-btn>svg {
    width: 20px;
    height: 20px;
    fill: none;
    stroke-width: 2;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    transition: opacity 0.4s, transform 0.4s, stroke 0.4s, filter 0.4s;
}

.header-spacer {
    display: none;
    /* Ocultar espaciador */
}

.footer-banner {
    width: 100%;
    margin-top: auto;
    background-color: #000;
    color: #f1f1f1;
    padding: 1rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: none;
    z-index: 100;
    font-size: 0.8rem;
    text-align: center;
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

.footer-content {
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.footer-tools {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 0.75rem;
    color: #f1f1f1;
}

.footer-tools span {
    font-size: 0.8rem;
    opacity: 0.7;
}

.footer-tools a {
    color: #fff;
    opacity: 0.8;
    transition: opacity 0.2s ease;
    display: inline-flex;
    align-items: center;
}

.footer-tools a:hover {
    opacity: 1;
}

.tool-logo {
    height: 20px;
    width: auto;
    fill: currentColor;
}

.footer-copyright {
    margin-top: 0;
    opacity: 0.6;
    font-size: 0.75rem;
    transition: opacity 0.3s ease, color 0.3s ease;
}

.main-layout {
    margin: 0 auto;
    display: flex;
    gap: 1rem;
    align-items: flex-start;
    width: 100%;
    flex-grow: 1;
    padding: 0 0.5rem 1rem;
}

.filters-column {
    flex: 0 0 253px;
    /* +15% sobre 220px */
    display: flex;
    flex-direction: column;
    gap: 0.98rem;
    /* +15% sobre 0.85rem */
}

.results-panel {
    flex: 1;
}

.glass {
    background-color: var(--material-surface-light);
    border: 1px solid var(--material-surface-border);
    border-radius: 12px;
    padding: 0.85rem 1.1rem;
    box-shadow: var(--elevation-1);
    transition: all var(--transition-base);
    position: relative;
    overflow: hidden;
}

/* Subtle inner glow */
.glass::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 12px;
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.05) 0%,
            transparent 50%);
    pointer-events: none;
    opacity: 0.5;
    transition: opacity var(--transition-base);
}

.glass:hover::before {
    opacity: 0.8;
}

/* Enhanced glassmorphism for orbital mode */
body.modo-orbital .glass {
    background: linear-gradient(135deg,
            rgba(30, 41, 59, 0.95) 0%,
            rgba(30, 41, 59, 0.9) 100%);
    backdrop-filter: blur(16px) saturate(160%);
    -webkit-backdrop-filter: blur(16px) saturate(160%);
    border: 1px solid rgba(59, 130, 246, 0.2);
    box-shadow:
        0 4px 16px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(59, 130, 246, 0.1),
        0 0 0 1px rgba(59, 130, 246, 0.08);
}

body.modo-orbital .glass::before {
    background: linear-gradient(135deg,
            rgba(59, 130, 246, 0.08) 0%,
            transparent 50%);
}

/* Enhanced glassmorphism for dark mode */
body.lp-dark .glass {
    background: linear-gradient(135deg,
            rgba(10, 10, 10, 0.95) 0%,
            rgba(10, 10, 10, 0.92) 100%);
    backdrop-filter: blur(12px) saturate(140%);
    -webkit-backdrop-filter: blur(12px) saturate(140%);
    border: 1px solid rgba(255, 255, 255, 0.12);
    box-shadow:
        0 3px 12px rgba(0, 0, 0, 0.6),
        inset 0 1px 0 rgba(255, 255, 255, 0.06);
}

body.lp-dark .glass::before {
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.03) 0%,
            transparent 50%);
}

/* --- 游댮 REGLA MODIFICADA: `gap: 8px;` ELIMINADO --- */
.filter-title {
    font-weight: 600;
    font-size: 0.9rem;
    /* +15% */
    margin-bottom: 0.46rem;
    /* +15% */
    padding-bottom: 0;
    border-bottom: none;
    text-align: left;
    display: flex;
    align-items: center;
    gap: 6px;
    /* Espacio para 칤conos si se agregan */
    transition: color 0.5s ease;
    color: var(--text-color);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    opacity: 0.9;
}

body.lp-dark .filter-title,
body.modo-orbital .filter-title {
    color: var(--text-color);
    opacity: 0.9;
}

/* --- 游댮 REGLA ELIMINADA (ESTABA VAC칈A) --- */
/* .filter-title svg { ... } */

.form-input {
    width: 100%;
    padding: 5.75px 9.8px;
    /* +15% */
    border-radius: 9.8px;
    /* +15% */
    border: 1px solid var(--material-surface-border);
    background-color: var(--input-bg);
    color: var(--text-color);
    font-size: 0.9rem;
    /* +15% */
    transition: all 0.3s ease;
    box-sizing: border-box;
    box-shadow: none;
    margin-bottom: 0.3rem;
    /* +15% */
}

.form-input:last-of-type {
    margin-bottom: 0;
}

.form-input:focus {
    border-color: var(--input-focus-border);
    box-shadow: 0 0 0 2px rgba(var(--input-focus-border-rgb, 37, 99, 235), 0.3);
}

.form-input::placeholder {
    color: var(--text-color);
    opacity: 0.6;
}

body.lp-dark .form-input::placeholder,
body.modo-orbital .form-input::placeholder {
    color: var(--text-color);
    opacity: 0.7;
}

.search-container {
    position: relative;
    margin-bottom: 0.3rem;
}

#busquedaRapida {
    padding-left: 36px;
    padding-right: 10px;
}

/* --- LOGO X --- */
.header-x {
    width: 36px;
    height: 24px;
    fill: currentColor;
    /* Mismo color que el texto */
    filter: none;
    transition: transform 0.3s ease;
}

header:hover .header-x {
    transform: scale(1.1);
    filter: none;
}

.search-icon {
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    width: 20px;
    height: 20px;
    stroke: var(--text-color);
    fill: none;
    stroke-width: 2;
    opacity: 0.5;
    transition: opacity 0.3s ease, transform 0.3s ease, stroke 0.5s ease;
}

@keyframes magnify {
    0% {
        transform: translateY(-50%) scale(1);
        opacity: 0.5;
    }

    50% {
        transform: translateY(-50%) scale(1.15);
        opacity: 0.8;
    }

    100% {
        transform: translateY(-50%) scale(1);
        opacity: 0.6;
    }
}



.position-btn {
    flex: 1;
    padding: 10px 14px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 600;
    text-align: center;
    transition: all var(--transition-base);
    border: 1.5px solid var(--material-surface-border);
    background-color: transparent;
    color: var(--text-color);
    position: relative;
    overflow: hidden;
}

/* Ripple effect background */
.position-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(var(--material-surface-light-rgb), 0.3);
    opacity: 0;
    transition: opacity var(--transition-fast);
}

.position-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.position-btn:hover::before {
    opacity: 1;
}

.position-btn:active {
    transform: translateY(0);
    transition: all var(--transition-fast);
}

/* Delantera (Front) - Orange */
#positionDelantera.active {
    background: linear-gradient(135deg,
            rgba(249, 115, 22, 0.15) 0%,
            rgba(234, 88, 12, 0.18) 100%);
    border-color: rgba(249, 115, 22, 0.5);
    color: #ea580c;
    font-weight: 700;
    box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3),
        inset 0 1px 0 rgba(249, 115, 22, 0.2);
}

/* Trasera (Rear) - Purple */
#positionTrasera.active {
    background: linear-gradient(135deg,
            rgba(168, 85, 247, 0.15) 0%,
            rgba(147, 51, 234, 0.18) 100%);
    border-color: rgba(168, 85, 247, 0.5);
    color: #9333ea;
    font-weight: 700;
    box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3),
        inset 0 1px 0 rgba(168, 85, 247, 0.2);
}

/* Dark & Orbital modes - brighter colors */
body.lp-dark #positionDelantera.active,
body.modo-orbital #positionDelantera.active {
    background: linear-gradient(135deg,
            rgba(251, 146, 60, 0.18) 0%,
            rgba(249, 115, 22, 0.22) 100%);
    border-color: rgba(251, 146, 60, 0.6);
    color: #fb923c;
    box-shadow: 0 4px 12px rgba(251, 146, 60, 0.35),
        inset 0 1px 0 rgba(251, 146, 60, 0.25);
}

body.lp-dark #positionTrasera.active,
body.modo-orbital #positionTrasera.active {
    background: linear-gradient(135deg,
            rgba(192, 132, 252, 0.18) 0%,
            rgba(168, 85, 247, 0.22) 100%);
    border-color: rgba(192, 132, 252, 0.6);
    color: #c084fc;
    box-shadow: 0 4px 12px rgba(192, 132, 252, 0.35),
        inset 0 1px 0 rgba(192, 132, 252, 0.25);
}

body.lp-dark .position-btn,
body.modo-orbital .position-btn {
    border-color: var(--material-surface-border);
    color: var(--text-color);
    opacity: 0.95;
}

body.lp-dark .position-btn:hover,
body.modo-orbital .position-btn:hover {
    background-color: var(--btn-google-hover-bg);
    opacity: 1;
}

body.lp-dark #positionDelantera.active,
body.lp-dark #positionTrasera.active,
body.modo-orbital #positionDelantera.active,
body.modo-orbital #positionTrasera.active {
    opacity: 1;
}

.input-group-horizontal {
    display: flex;
    gap: 0.3rem;
    margin-bottom: 0.3rem;
}

.input-group-horizontal .form-input {
    margin-bottom: 0;
    flex: 1;
}

.input-group-horizontal:last-of-type {
    margin-bottom: 0;
}

.result-count-container {
    font-size: 0.85rem;
    color: var(--text-color);
    margin-top: 0;
    opacity: 0.8;
    transition: color 0.5s ease, opacity 0.5s ease;
}

.result-count-container strong {
    font-weight: 600;
}

.filter-group {
    margin-top: 1rem;
    border-top: 1px solid var(--material-surface-border);
    padding-top: 1rem;
    transition: border-color 0.5s ease;
    position: relative;
}

/* L칤nea decorativa sutil */
.filter-group::before {
    content: '';
    position: absolute;
    top: -1px;
    left: 0;
    width: 40px;
    height: 2px;
    background: linear-gradient(90deg, var(--input-focus-border), transparent);
    opacity: 0.6;
    transition: width 0.3s ease, opacity 0.3s ease;
}

.filter-group:hover::before {
    width: 80px;
    opacity: 1;
}

.glass>.filter-group {
    margin-top: 0.8rem;
}

.glass>.filter-group:first-of-type {
    margin-top: 0.7rem;
    /* Espacio desde el t칤tulo principal */
    border-top: none;
    padding-top: 0;
}

.glass>.filter-group:first-of-type::before {
    display: none;
}

.no-results-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 3rem 1rem;
    color: var(--text-color);
    opacity: 0.6;
    width: 100%;
    border: 2px dashed var(--material-surface-border);
    border-radius: 1rem;
    margin-top: 1rem;
    grid-column: 1 / -1;
    transition: color 0.5s ease, opacity 0.5s ease, border-color 0.5s ease;
}

.no-results-container p {
    font-size: 1.1rem;
    font-weight: 600;
    margin-top: 1rem;
    margin-bottom: 0.25rem;
}

.no-results-container span {
    font-size: 0.9rem;
}

.no-results-container svg {
    width: 60px;
    height: 60px;
    stroke: var(--text-color);
    opacity: 0.5;
    transition: stroke 0.5s ease, opacity 0.5s ease;
}

/* === Clear Filters Button - Clean Modern Design === */
.clear-filters-btn {
    position: relative;
    overflow: visible;
    width: 100%;
    height: auto;
    padding: 11px 18px;
    border-radius: 10px;
    margin: 1rem 0 0 0;
    background: linear-gradient(135deg,
            rgba(239, 68, 68, 0.06) 0%,
            rgba(220, 38, 38, 0.08) 100%);
    color: #dc2626;
    border: 1.5px solid rgba(239, 68, 68, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    cursor: pointer;
    outline: none;
    font-size: 0.82rem;
    font-weight: 600;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 1px 3px rgba(239, 68, 68, 0.08);
}

.clear-filters-btn:hover {
    background: linear-gradient(135deg,
            rgba(239, 68, 68, 0.12) 0%,
            rgba(220, 38, 38, 0.15) 100%);
    border-color: rgba(239, 68, 68, 0.4);
    color: #b91c1c;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2),
        0 2px 4px rgba(0, 0, 0, 0.08);
}

.clear-filters-btn:active {
    transform: translateY(0) scale(0.98);
    animation: btnShakeStrong 0.5s ease;
}

/* Dark Mode - Colores m치s brillantes */
body.lp-dark .clear-filters-btn {
    background: linear-gradient(135deg,
            rgba(248, 113, 113, 0.15) 0%,
            rgba(239, 68, 68, 0.18) 100%);
    color: #f87171;
    border-color: rgba(248, 113, 113, 0.35);
    box-shadow: 0 2px 6px rgba(248, 113, 113, 0.2);
}

body.lp-dark .clear-filters-btn:hover {
    background: linear-gradient(135deg,
            rgba(248, 113, 113, 0.22) 0%,
            rgba(239, 68, 68, 0.25) 100%);
    border-color: rgba(248, 113, 113, 0.5);
    color: #fca5a5;
    box-shadow: 0 6px 16px rgba(248, 113, 113, 0.3),
        0 2px 4px rgba(0, 0, 0, 0.15);
}

/* Orbital Mode - Colores vibrantes */
body.modo-orbital .clear-filters-btn {
    background: linear-gradient(135deg,
            rgba(248, 113, 113, 0.12) 0%,
            rgba(239, 68, 68, 0.15) 100%);
    color: #f87171;
    border-color: rgba(248, 113, 113, 0.32);
    box-shadow: 0 2px 6px rgba(248, 113, 113, 0.18);
}

body.modo-orbital .clear-filters-btn:hover {
    background: linear-gradient(135deg,
            rgba(248, 113, 113, 0.18) 0%,
            rgba(239, 68, 68, 0.22) 100%);
    border-color: rgba(248, 113, 113, 0.45);
    color: #fca5a5;
    box-shadow: 0 6px 16px rgba(248, 113, 113, 0.25),
        0 2px 4px rgba(0, 0, 0, 0.12);
}

/* Icon Styling - Simplified */
.clear-filters-btn svg {
    width: 18px;
    height: 18px;
    stroke: currentColor;
    stroke-width: 2.5;
    fill: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.clear-filters-btn:hover svg {
    transform: translateY(-2px) scale(1.08);
}

.clear-filters-btn.animating svg {
    animation: trashBounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes trashBounce {

    0%,
    100% {
        transform: translateY(0) scale(1);
    }

    10% {
        transform: translateY(-3px) scale(1.05);
    }

    20% {
        transform: translateY(0) scale(1);
    }

    30% {
        transform: translateY(-2px) scale(1.03);
    }

    40% {
        transform: translateY(0) scale(1);
    }

    50% {
        transform: translateY(-1px) scale(1.02);
    }

    60% {
        transform: translateY(0) scale(1);
    }
}

@keyframes shake-icon {

    0%,
    100% {
        transform: rotate(0deg);
    }

    10%,
    30%,
    50%,
    70%,
    90% {
        transform: rotate(-8deg);
    }

    20%,
    40%,
    60%,
    80% {
        transform: rotate(8deg);
    }
}

/* Strong shake on active click */
@keyframes btnShakeStrong {

    0%,
    100% {
        transform: translateY(-1px) scale(0.98) rotate(0deg);
    }

    10%,
    30%,
    50%,
    70%,
    90% {
        transform: translateY(-1px) scale(0.98) rotate(-3deg);
    }

    20%,
    40%,
    60%,
    80% {
        transform: translateY(-1px) scale(0.98) rotate(3deg);
    }
}

.clear-filters-btn:hover svg {
    transform: scale(1.08);
    filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.25));
}

/* Trash Throw Animation - Detailed */
.clear-filters-btn::after {
    content: '';
    position: absolute;
    top: -10px;
    left: 50%;
    width: 6px;
    height: 6px;
    background-color: white;
    border-radius: 50%;
    opacity: 0;
    transform: translateX(-50%) translateY(-20px);
    pointer-events: none;
    z-index: 10;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.clear-filters-btn.animating::after {
    animation: throwPaperArc 0.8s ease-in forwards;
}

@keyframes throwPaperArc {
    0% {
        opacity: 0;
        transform: translateX(-50%) translateY(-30px) scale(0.5);
    }

    20% {
        opacity: 1;
        transform: translateX(-50%) translateY(-30px) scale(1);
    }

    100% {
        opacity: 0;
        transform: translateX(-12px) translateY(5px) scale(0.2);
    }
}

/* Lid Animation */
.clear-filters-btn .trash-lid {
    transform-origin: 21px 6px;
    /* Pivot at hinge point (right side of lid) */
    transition: transform 0.2s ease;
}

.clear-filters-btn.animating .trash-lid {
    animation: lidOpenClose 0.7s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes lidOpenClose {
    0% {
        transform: rotate(0deg);
    }

    15% {
        transform: rotate(-60deg);
    }

    /* Wide open */
    65% {
        transform: rotate(-60deg);
    }

    /* Stay open longer */
    85% {
        transform: rotate(5deg);
    }

    /* Bounce back */
    100% {
        transform: rotate(0deg);
    }
}

/* Body Animation */
.clear-filters-btn .trash-body {
    transform-origin: 50% 100%;
}

.clear-filters-btn.animating .trash-body {
    animation: trashSquash 0.8s ease-in-out;
}

@keyframes trashSquash {

    0%,
    70% {
        transform: scaleY(1);
    }

    80% {
        transform: scaleY(0.9) scaleX(1.05);
    }

    /* Squash on close */
    90% {
        transform: scaleY(1.05) scaleX(0.95);
    }

    /* Stretch */
    100% {
        transform: scaleY(1);
    }
}

/* Icon shake while animating */
.clear-filters-btn.animating svg {
    animation: shake-icon 0.7s ease-in-out;
}

/* btnShakeStrong animation defined above replaces the old btnShake */

.brand-tags-container,
.manufacturer-tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    padding: 0.75rem;
    justify-content: center;
    background: transparent;
    border-radius: 10px;
    margin-top: 0;
    align-items: center;
}

/* ======================================================= */
/* 游릭 ETIQUETAS MEJORADAS 游릭               */
/* ======================================================= */
.brand-tag {
    font-family: 'Inter', sans-serif;
    font-size: 0.72rem;
    font-weight: 500;
    padding: 6px 13px;
    border-radius: 8px;
    border: 1.5px solid var(--tag-brand-color, rgba(108, 117, 125, 0.4));
    color: var(--tag-brand-color, var(--text-color));
    background-color: rgba(var(--tag-brand-color-rgb, 108, 117, 125), 0.1);
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    white-space: nowrap;
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.brand-tag:hover {
    background-color: rgba(var(--tag-brand-color-rgb, 108, 117, 125), 0.18);
    border-color: var(--tag-brand-color, rgba(108, 117, 125, 0.6));
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.brand-tag.active {
    background-color: var(--tag-brand-color, #6c757d);
    border-color: var(--tag-brand-color, #6c757d);
    color: #ffffff;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
    transform: translateY(-1px);
}

/* Dark mode improvements */
body.lp-dark .brand-tag,
body.modo-orbital .brand-tag {
    border-width: 1.5px;
    background-color: rgba(var(--tag-brand-color-rgb, 108, 117, 125), 0.15);
}

body.lp-dark .brand-tag:hover,
body.modo-orbital .brand-tag:hover {
    background-color: rgba(var(--tag-brand-color-rgb, 108, 117, 125), 0.25);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* ======================================================= */
/* 游댮 FIN ETIQUETAS                                 */
/* ======================================================= */

@keyframes skeleton-pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.6;
    }
}

@keyframes shimmer {
    0% {
        background-position: -1000px 0;
    }

    100% {
        background-position: 1000px 0;
    }
}

.skeleton-card {
    background-color: var(--material-surface-light);
    border: 1px solid var(--material-surface-border);
    border-radius: 0.75rem;
    padding: 0.75rem;
    box-shadow: var(--elevation-1);
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
    transition: background-color 0.5s ease, border-color 0.5s ease;
    animation: skeleton-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.skeleton-line,
.skeleton-box {
    background: linear-gradient(90deg,
            var(--skeleton-bg) 0%,
            var(--skeleton-highlight) 40%,
            var(--skeleton-bg) 80%,
            var(--skeleton-bg) 100%);
    background-size: 1000px 100%;
    animation: shimmer 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    border-radius: 0.25rem;
}

.skeleton-line {
    height: 1rem;
}

.skeleton-box {
    width: 100%;
    aspect-ratio: 4 / 3;
    border-radius: 0.5rem;
}

.skeleton-line.short {
    width: 40%;
}

.skeleton-line.long {
    width: 80%;
}

.results-header-card {
    padding: 0.5rem 1rem;
    margin-bottom: 0.8rem;
}

.results-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0;
}

.results-panel>.results-header-card {
    margin-top: 0;
    margin-bottom: 0.8rem;
}

.view-toggle-buttons {
    display: flex;
    gap: 0.5rem;
}

/* === Modern View Toggle Buttons === */
.view-btn {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    border: 1.5px solid var(--material-surface-border);
    background-color: transparent;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.view-btn svg {
    width: 20px;
    height: 20px;
    stroke: var(--text-color);
    opacity: 0.7;
    transition: all 0.25s ease;
}

.view-btn:hover {
    background-color: rgba(var(--material-surface-light-rgb), 0.5);
    transform: translateY(-1px);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
}

.view-btn:hover svg {
    opacity: 1;
}

.view-btn.active {
    background: linear-gradient(135deg,
            rgba(59, 130, 246, 0.08) 0%,
            rgba(37, 99, 235, 0.1) 100%);
    border-color: rgba(59, 130, 246, 0.3);
    box-shadow: 0 2px 6px rgba(59, 130, 246, 0.15);
}

.view-btn.active svg {
    opacity: 1;
    stroke: #1d4ed8;
}

/* === History Button with Counter === */
#historialBtn {
    position: relative;
    width: auto;
    display: none;
    /* Hidden by default, shown via JavaScript when count > 0 */
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-color);
    opacity: 0;
    transform: scale(0.95);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        opacity 0.3s ease,
        transform 0.3s ease,
        box-shadow 0.3s ease;
}

#historialBtn svg {
    width: 18px;
    height: 18px;
    stroke: var(--text-color);
    opacity: 1;
    transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55),
        stroke 0.3s ease,
        filter 0.3s ease;
}

#historialBtn:hover {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.06) 0%,
            rgba(79, 70, 229, 0.08) 100%);
    border-color: rgba(99, 102, 241, 0.25);
    opacity: 1;
    transform: translateY(-2px) scale(1);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15),
        0 2px 4px rgba(0, 0, 0, 0.08);
}

#historialBtn:hover svg {
    opacity: 1;
    stroke: #6366f1;
    transform: rotate(360deg);
    filter: drop-shadow(0 2px 4px rgba(99, 102, 241, 0.3));
}

#historialBtn.active {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.1) 0%,
            rgba(79, 70, 229, 0.12) 100%);
    border-color: rgba(99, 102, 241, 0.35);
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.25),
        0 1px 3px rgba(0, 0, 0, 0.08);
    opacity: 1;
}

#historialBtn.active svg {
    stroke: #6366f1;
    opacity: 1;
}

body.lp-dark #historialBtn:hover {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.1) 0%,
            rgba(79, 70, 229, 0.12) 100%);
    border-color: rgba(99, 102, 241, 0.3);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2),
        0 2px 4px rgba(0, 0, 0, 0.15);
}

body.lp-dark #historialBtn:hover svg {
    stroke: #818cf8;
}

body.lp-dark #historialBtn.active {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.15) 0%,
            rgba(79, 70, 229, 0.18) 100%);
    border-color: rgba(99, 102, 241, 0.4);
}

body.lp-dark #historialBtn.active svg {
    stroke: #a5b4fc;
}

body.modo-orbital #historialBtn:hover {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.08) 0%,
            rgba(79, 70, 229, 0.1) 100%);
    border-color: rgba(99, 102, 241, 0.28);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.18),
        0 2px 4px rgba(0, 0, 0, 0.12);
}

body.modo-orbital #historialBtn:hover svg {
    stroke: #6366f1;
}

body.modo-orbital #historialBtn.active {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.12) 0%,
            rgba(79, 70, 229, 0.15) 100%);
    border-color: rgba(99, 102, 241, 0.35);
}

body.modo-orbital #historialBtn.active svg {
    stroke: #818cf8;
}

#historialBtn .btn-text {
    display: inline-block;
    white-space: nowrap;
}

/* === History Counter Badge === */
.history-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background: linear-gradient(135deg, #818cf8 0%, #6366f1 100%);
    color: #ffffff;
    font-size: 0.7rem;
    font-weight: 700;
    padding: 3px 7px;
    border-radius: 12px;
    min-width: 20px;
    height: 20px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    box-shadow: 0 3px 8px rgba(99, 102, 241, 0.5),
        0 0 0 2px var(--material-surface-light);
    animation: scaleIn 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 10;
    pointer-events: none;
    transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

body.lp-dark .history-count {
    box-shadow: 0 3px 8px rgba(99, 102, 241, 0.6),
        0 0 0 2px #111111;
}

body.modo-orbital .history-count {
    box-shadow: 0 3px 8px rgba(99, 102, 241, 0.5),
        0 0 0 2px #1e293b;
}

#historialBtn:hover .history-count {
    transform: scale(1.1);
    animation: counterPulse 0.6s ease infinite;
}

/* Keyframe for counter pulse effect */
@keyframes counterPulse {

    0%,
    100% {
        transform: scale(1.1);
    }

    50% {
        transform: scale(1.15);
    }
}

/* === Favorites Button with Counter === */
.favorites-btn {
    position: relative;
    width: 40px;
    height: 40px;
    display: none;
    /* Hidden by default, shown via JavaScript when count > 0 */
    align-items: center;
    justify-content: center;
    opacity: 0;
    transform: scale(0.95);
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1),
        opacity 0.25s ease,
        transform 0.25s ease;
}

.favorites-btn .heart-icon {
    width: 20px;
    height: 20px;
    fill: none;
    stroke: var(--text-color);
    stroke-width: 2;
    opacity: 0.7;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.favorites-btn:hover {
    background-color: var(--btn-google-hover-bg);
    transform: translateY(-1px) scale(1);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
}

.favorites-btn:hover .heart-icon {
    opacity: 1;
    transform: scale(1.1);
}

.favorites-btn.active {
    background: linear-gradient(135deg,
            rgba(239, 68, 68, 0.08) 0%,
            rgba(220, 38, 38, 0.1) 100%);
    border-color: rgba(239, 68, 68, 0.3);
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.2);
}

.favorites-btn.active .heart-icon {
    fill: #ef4444;
    stroke: #dc2626;
    opacity: 1;
    animation: heartBeat 0.6s ease;
}

body.lp-dark .favorites-btn.active {
    background: linear-gradient(135deg,
            rgba(239, 68, 68, 0.12) 0%,
            rgba(220, 38, 38, 0.15) 100%);
    border-color: rgba(239, 68, 68, 0.35);
}

body.lp-dark .favorites-btn.active .heart-icon {
    fill: #f87171;
    stroke: #ef4444;
}

body.modo-orbital .favorites-btn.active {
    background: linear-gradient(135deg,
            rgba(239, 68, 68, 0.1) 0%,
            rgba(220, 38, 38, 0.12) 100%);
    border-color: rgba(239, 68, 68, 0.32);
}

body.modo-orbital .favorites-btn.active .heart-icon {
    fill: #ef4444;
    stroke: #dc2626;
}

@keyframes heartBeat {

    0%,
    100% {
        transform: scale(1);
    }

    25% {
        transform: scale(1.2);
    }

    50% {
        transform: scale(0.95);
    }

    75% {
        transform: scale(1.1);
    }
}

/* === Favorites Counter Badge (Outside, Top-Right) === */
.favorites-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background: linear-gradient(135deg, #f87171 0%, #ef4444 100%);
    color: #ffffff;
    font-size: 0.7rem;
    font-weight: 700;
    padding: 3px 7px;
    border-radius: 12px;
    min-width: 20px;
    height: 20px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    box-shadow: 0 3px 8px rgba(239, 68, 68, 0.5),
        0 0 0 2px var(--material-surface-light);
    animation: scaleIn 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 10;
    pointer-events: none;
}

body.lp-dark .favorites-count {
    box-shadow: 0 3px 8px rgba(239, 68, 68, 0.6),
        0 0 0 2px #111111;
}

body.modo-orbital .favorites-count {
    box-shadow: 0 3px 8px rgba(239, 68, 68, 0.5),
        0 0 0 2px #1e293b;
}

.favorites-btn:hover .favorites-count {
    transform: scale(1.05);
}

@keyframes fadeInUpCard {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.results-wrapper {
    display: grid;
    gap: 1rem;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    transition: opacity var(--transition-base);
}

.results-wrapper.loading {
    opacity: 0.5;
    pointer-events: none;
}

.result-card {
    display: flex;
    flex-direction: column;
    background-color: var(--material-surface-light);
    border: 1px solid var(--material-surface-border);
    border-radius: 12px;
    padding: 0.75rem;
    box-shadow: var(--elevation-1);
    opacity: 0;
    animation: fadeInUpCard 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    overflow: hidden;
    position: relative;
    cursor: pointer;
    transition: all var(--transition-slow);
    width: 100%;
    transform-style: preserve-3d;
    will-change: transform, box-shadow;
}

/* Stagger animation for cards */
.result-card:nth-child(1) {
    animation-delay: 0ms;
}

.result-card:nth-child(2) {
    animation-delay: 50ms;
}

.result-card:nth-child(3) {
    animation-delay: 100ms;
}

.result-card:nth-child(4) {
    animation-delay: 150ms;
}

.result-card:nth-child(5) {
    animation-delay: 200ms;
}

.result-card:nth-child(6) {
    animation-delay: 250ms;
}

.result-card:nth-child(7) {
    animation-delay: 300ms;
}

.result-card:nth-child(8) {
    animation-delay: 350ms;
}

.result-card:nth-child(9) {
    animation-delay: 400ms;
}

/* Subtle gradient overlay */
.result-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 12px;
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.05) 0%,
            rgba(255, 255, 255, 0) 50%,
            rgba(0, 0, 0, 0.02) 100%);
    opacity: 0;
    transition: opacity var(--transition-base);
    pointer-events: none;
    z-index: 1;
}

/* Premium hover effect */
.result-card:hover,
.result-card:focus {
    box-shadow: var(--elevation-hover);
    transform: translateY(-6px) scale(1.01);
    border-color: var(--accent-blue);
}

.result-card:hover::before {
    opacity: 1;
}

/* Active/pressed state */
.result-card:active {
    transform: translateY(-4px) scale(0.99);
    transition: all var(--transition-fast);
}

/* Dark mode adjustments */
body.lp-dark .result-card:hover,
body.lp-dark .result-card:focus {
    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.5),
        0 8px 16px rgba(0, 0, 0, 0.3),
        0 0 0 1px rgba(96, 165, 250, 0.2),
        0 0 40px rgba(96, 165, 250, 0.15);
}

/* Orbital mode adjustments */
body.modo-orbital .result-card {
    border-color: rgba(59, 130, 246, 0.15);
}

body.modo-orbital .result-card:hover,
body.modo-orbital .result-card:focus {
    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.6),
        0 8px 16px rgba(0, 0, 0, 0.4),
        0 0 0 1px rgba(59, 130, 246, 0.4),
        0 0 50px rgba(59, 130, 246, 0.2);
    border-color: var(--accent-blue);
}

.card-thumbnail {
    width: 100%;
    aspect-ratio: 4 / 3;
    margin-bottom: 0.5rem;
    border-radius: 0.3rem;
    overflow: hidden;
    background-color: var(--skeleton-bg);
    transition: background-color 0.5s ease;
}

.result-image {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.card-content-wrapper {
    flex: 1;
}

.card-details {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin-bottom: 0.3rem;
}

.card-ref-container {
    display: flex;
    flex-wrap: wrap;
    gap: 0.3rem;
    margin-bottom: 0.2rem;
    flex-grow: 1;
    margin-right: 0.5rem;
}

.ref-badge {
    padding: 0.15rem 0.5rem;
    border-radius: 50px;
    font-weight: 600;
    font-size: 0.75rem;
    white-space: nowrap;
    line-height: 1.3;
    display: inline-block;
    border: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    animation: badgeFadeIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
}

/* Stagger animation for multiple badges */
.card-ref-container .ref-badge:nth-child(1) {
    animation-delay: 0s;
}

.card-ref-container .ref-badge:nth-child(2) {
    animation-delay: 0.05s;
}

.card-ref-container .ref-badge:nth-child(3) {
    animation-delay: 0.1s;
}

.card-ref-container .ref-badge:nth-child(4) {
    animation-delay: 0.15s;
}

.card-ref-container .ref-badge:nth-child(5) {
    animation-delay: 0.2s;
}

@keyframes badgeFadeIn {
    from {
        opacity: 0;
        transform: scale(0.8) translateY(5px);
    }

    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Hover effect on badges */
.ref-badge:hover {
    transform: scale(1.05) translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    filter: brightness(1.1);
}

.ref-badge-na {
    background-color: var(--badge-menta-bg);
    color: var(--badge-menta-text);
}

.position-badge {
    padding: 0.15rem 0.5rem;
    border-radius: 50px;
    font-weight: 500;
    font-size: 0.75rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    white-space: nowrap;
    flex-shrink: 0;
    cursor: default;
    animation: badgeFadeIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) backwards 0.1s;
    position: static;
    transform: none;
    border: none;
    box-shadow: none;
}

.position-badge:hover {
    transform: scale(1.08);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

.position-badge.delantera {
    background-color: var(--badge-delantera-bg);
    color: var(--badge-delantera-text);
}

.position-badge.trasera {
    background-color: var(--badge-trasera-bg);
    color: var(--badge-trasera-text);
}

.card-app-summary {
    font-size: 0.65rem;
    line-height: 1.3;
    color: var(--text-color);
    opacity: 0.7;
    max-height: 2.6em;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    transition: color 0.5s ease, opacity 0.5s ease;
}

body.lp-dark .card-app-summary,
body.modo-orbital .card-app-summary {
    opacity: 0.8;
    color: var(--text-color);
}

.modal-position {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    text-align: left;
    height: auto;
    position: static;
    z-index: auto;
}

.modal-position .position-badge {
    display: inline-block;
    position: static;
    transform: none;
    border-radius: 50px;
    font-size: 0.75rem;
    font-weight: 500;
    padding: 0.15rem 0.5rem;
    border: none;
    box-shadow: none;
    margin-bottom: 0;
}

.pagination-container {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 1.5rem;
}

.page-btn {
    font-family: 'Inter', sans-serif;
    font-size: 0.9rem;
    font-weight: 500;
    padding: 6px 12px;
    min-width: 36px;
    text-align: center;
    border-radius: 8px;
    border: 1px solid var(--material-surface-border);
    background-color: var(--material-surface-light);
    color: var(--text-color);
    cursor: pointer;
    transition: background-color 0.2s ease, color 0.5s ease, box-shadow 0.2s, border-color 0.5s ease;
}

.page-btn:hover {
    background-color: var(--input-bg);
}

.page-btn.active {
    background-color: var(--btn-primary-bg);
    border-color: var(--btn-primary-bg);
    color: var(--btn-primary-text);
    box-shadow: var(--btn-primary-shadow);
}

.page-btn[disabled] {
    opacity: 0.5;
    cursor: not-allowed;
    background-color: var(--input-bg);
}

.applications-list-container {
    margin-top: 0;
    padding-top: 0;
}

.app-brand-header {
    font-weight: 700;
    font-size: 0.75rem;
    padding: 0.65rem 0;
    margin-top: 1.25rem;
    margin-bottom: 0.75rem;
    color: var(--text-color);
    opacity: 0.85;
    background: transparent;
    border-bottom: 1px solid var(--material-surface-border);
    border-radius: 0;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
}

.modal-apps-specs .spec-details-grid {
    display: grid;
    grid-template-columns: 140px 1fr;
    gap: 0.85rem 1.25rem;
    align-items: baseline;
    padding: 0;
    font-size: 0.85rem;
    background: transparent;
    border-radius: 0;
    margin-top: 0.75rem;
}

.modal-apps-specs .spec-label {
    font-weight: 600;
    white-space: nowrap;
    text-align: left;
    padding-top: 0;
    color: var(--text-color);
    opacity: 0.65;
    font-size: 0.8rem;
    text-transform: none;
    letter-spacing: 0;
}

.modal-apps-specs .spec-value {
    text-align: left;
    word-break: break-word;
    font-weight: 500;
    color: var(--text-color);
    opacity: 0.95;
}

.modal-apps-specs .spec-details-grid>div {
    border-bottom: 1px solid rgba(var(--material-surface-light-rgb), 0.08);
    padding-bottom: 0.85rem;
    padding-top: 0;
}

.modal-apps-specs .spec-details-grid>.spec-label:nth-last-of-type(2),
.modal-apps-specs .spec-details-grid>.spec-value:last-of-type {
    border-bottom: none;
    padding-bottom: 0;
}

.applications-list-container .app-detail-row {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr;
    align-items: center;
    gap: 0.75rem 1rem;
    padding: 0.75rem 0;
    border-bottom: 1px solid rgba(var(--material-surface-light-rgb), 0.06);
    color: var(--text-color);
    opacity: 0.9;
    transition: all 0.2s ease;
    font-size: 0.85rem;
    border-radius: 0;
}

.applications-list-container .app-detail-row:hover {
    background: transparent;
    opacity: 1;
    transform: none;
}

.applications-list-container .app-detail-row:last-child {
    border-bottom: none;
}

.applications-list-container .app-detail-row>div:first-child {
    font-weight: 600;
    color: var(--text-color);
}

.applications-list-container .app-detail-row>div:nth-child(2) {
    font-weight: 400;
    opacity: 0.75;
}

.applications-list-container .app-detail-row>div:last-child {
    text-align: right;
    font-weight: 600;
    color: var(--text-color);
    opacity: 0.85;
}

.card-model,
.app-header-row {
    display: none;
}

body.lp-dark .app-brand-header,
body.modo-orbital .app-brand-header {
    color: var(--text-color);
    opacity: 1;
}

body.lp-dark .app-detail-row,
body.modo-orbital .app-detail-row {
    color: var(--text-color);
    opacity: 0.9;
}

@keyframes modal-in {
    0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.9);
        filter: blur(10px);
    }

    60% {
        transform: translate(-50%, -50%) scale(1.02);
    }

    100% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
        filter: blur(0);
    }
}

@keyframes modal-out {
    from {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
        filter: blur(0);
    }

    to {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.92);
        filter: blur(8px);
    }
}

.modal-overlay {
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(12px) saturate(140%);
    -webkit-backdrop-filter: blur(12px) saturate(140%);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    padding: 1rem;
    cursor: pointer;
    transition: background-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
        opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1),
        backdrop-filter 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    animation: fadeInOverlay 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes fadeInOverlay {
    from {
        opacity: 0;
        backdrop-filter: blur(0px) saturate(100%);
        -webkit-backdrop-filter: blur(0px) saturate(100%);
    }

    to {
        opacity: 1;
        backdrop-filter: blur(12px) saturate(140%);
        -webkit-backdrop-filter: blur(12px) saturate(140%);
    }
}

.modal-content {
    background: linear-gradient(135deg,
            var(--material-surface-light) 0%,
            rgba(var(--material-surface-light-rgb), 0.98) 100%);
    color: var(--text-color);
    border-radius: 1.25rem;
    box-shadow: 0 25px 70px rgba(0, 0, 0, 0.6),
        0 15px 30px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.15),
        0 0 0 1px rgba(255, 255, 255, 0.05);
    padding: 1.75rem;
    width: 100%;
    max-width: 750px;
    max-height: 90vh;
    overflow: hidden;
    cursor: default;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    transition: background 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        border-color 0.5s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    animation: modal-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    border: 1px solid var(--material-surface-border);
    z-index: 10001;
}

/* Enhanced glassmorphism for Dark mode */
body.lp-dark .modal-content {
    background: linear-gradient(135deg,
            rgba(17, 17, 17, 0.98) 0%,
            rgba(17, 17, 17, 0.95) 100%);
    backdrop-filter: blur(20px) saturate(150%);
    -webkit-backdrop-filter: blur(20px) saturate(150%);
    box-shadow: 0 25px 70px rgba(0, 0, 0, 0.8),
        0 15px 30px rgba(0, 0, 0, 0.6),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 0 0 1px rgba(255, 255, 255, 0.08);
}

/* Enhanced glassmorphism for Orbital mode with glow */
body.modo-orbital .modal-content {
    background: linear-gradient(135deg,
            rgba(30, 41, 59, 0.98) 0%,
            rgba(30, 41, 59, 0.95) 100%);
    backdrop-filter: blur(20px) saturate(160%);
    -webkit-backdrop-filter: blur(20px) saturate(160%);
    border: 1px solid rgba(59, 130, 246, 0.3);
    box-shadow: 0 25px 70px rgba(0, 0, 0, 0.8),
        0 15px 30px rgba(59, 130, 246, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.12),
        0 0 0 1px rgba(59, 130, 246, 0.2),
        0 0 40px rgba(59, 130, 246, 0.1);
}

.modal-content.closing {
    animation: modal-out 0.25s cubic-bezier(0.6, 0.04, 0.98, 0.34) forwards;
}

.modal-layout-wrapper {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    flex-grow: 1;
    min-height: 0;
    overflow: hidden;
}

.modal-close-btn {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    background: rgba(var(--material-surface-light-rgb), 0.6);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid var(--material-surface-border);
    border-radius: 50%;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    line-height: 1;
    color: var(--text-color);
    opacity: 0.7;
    cursor: pointer;
    padding: 0;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 10003;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.modal-close-btn:hover {
    opacity: 1;
    transform: scale(1.1) rotate(90deg);
    background: rgba(var(--material-surface-light-rgb), 0.9);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.modal-close-btn:active {
    transform: scale(0.95) rotate(90deg);
}

.modal-image-carousel {
    width: 100%;
    aspect-ratio: 4 / 3;
    border-radius: 0.75rem;
    overflow: hidden;
    position: relative;
    background-color: var(--skeleton-bg);
    height: fit-content;
    transition: background-color 0.5s ease;
    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.1);
    border: 1px solid var(--material-surface-border);
}

.modal-image-carousel .image-track {
    display: flex;
    transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.modal-image-carousel .result-image {
    flex-shrink: 0;
    width: 100%;
    height: auto;
    object-fit: cover;
}

/* Carousel Progress Dots */
.carousel-dots {
    position: absolute;
    bottom: 1rem;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 0.5rem;
    z-index: 10002;
    padding: 0.5rem 0.75rem;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 50px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.carousel-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.4);
    border: none;
    cursor: pointer;
    padding: 0;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.carousel-dot:hover {
    background: rgba(255, 255, 255, 0.7);
    transform: scale(1.3);
    box-shadow: 0 2px 8px rgba(255, 255, 255, 0.3);
}

.carousel-dot.active {
    background: #ffffff;
    width: 24px;
    border-radius: 50px;
    box-shadow: 0 2px 8px rgba(255, 255, 255, 0.5);
}

@keyframes bounce-arrow {

    0%,
    100% {
        transform: translateY(-50%) translateX(0);
    }

    50% {
        transform: translateY(-50%) translateX(3px);
    }
}

.modal-image-carousel .carousel-nav-btn {
    z-index: 10001;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(12px) saturate(150%);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
    border: 1px solid rgba(255, 255, 255, 0.15);
    color: white;
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.4rem;
    font-weight: 600;
    cursor: pointer;
    opacity: 0.75;
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    line-height: 1;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.modal-image-carousel .carousel-nav-btn[data-direction="-1"] {
    left: 0.5rem;
    border-radius: 50%;
    animation: pulse-left 2s ease-in-out infinite;
}

.modal-image-carousel .carousel-nav-btn[data-direction="1"] {
    right: 0.5rem;
    border-radius: 50%;
    animation: pulse-right 2s ease-in-out infinite;
}

.modal-image-carousel .carousel-nav-btn:hover {
    opacity: 1;
    background: rgba(0, 0, 0, 0.75);
    transform: translateY(-50%) scale(1.15);
    box-shadow: 0 6px 24px rgba(0, 0, 0, 0.6),
        0 0 20px rgba(255, 255, 255, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    animation: none;
}

.modal-image-carousel .carousel-nav-btn:active {
    transform: translateY(-50%) scale(1.05);
}

@keyframes pulse-left {

    0%,
    100% {
        transform: translateY(-50%) translateX(0);
        opacity: 0.75;
    }

    50% {
        transform: translateY(-50%) translateX(-3px);
        opacity: 0.9;
    }
}

@keyframes pulse-right {

    0%,
    100% {
        transform: translateY(-50%) translateX(0);
        opacity: 0.75;
    }

    50% {
        transform: translateY(-50%) translateX(3px);
        opacity: 0.9;
    }
}

.modal-details-content-wrapper {
    display: flex;
    flex-direction: column;
    position: relative;
    min-height: 0;
    flex-grow: 1;
}

.modal-details-content {
    display: flex;
    flex-direction: column;
    gap: 0;
    overflow-y: auto;
    padding-right: 12px;
    padding-left: 0;
    margin-top: 0;
    flex-grow: 1;
    min-height: 0;
    max-height: 100%;
}

.modal-scroll-indicator {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 40px;
    background: linear-gradient(to top,
            var(--material-surface-light) 0%,
            rgba(var(--material-surface-light-rgb), 0.8) 50%,
            rgba(var(--material-surface-light-rgb), 0) 100%);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1),
        background 0.5s ease;
}

.modal-details-content-wrapper.scrollable .modal-scroll-indicator {
    opacity: 1;
    animation: pulse-scroll 2s ease-in-out infinite;
}

@keyframes pulse-scroll {

    0%,
    100% {
        opacity: 0.9;
    }

    50% {
        opacity: 1;
    }
}

.modal-ref {
    font-weight: 700;
    line-height: 1.2;
    transition: color 0.5s ease;
    color: var(--text-color);
    margin-bottom: 0;
    padding-bottom: 0;
    padding-top: 0;
    margin-top: 0;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    opacity: 0.7;
}

.modal-header-ref-container {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    justify-content: flex-start;
    margin-bottom: 1rem;
    padding: 1rem;
    background: transparent;
    border-bottom: 2px solid var(--material-surface-border);
    border-radius: 0;
}

.modal-ref .header-ref-badge {
    font-size: 0.8rem;
    padding: 0.35rem 0.75rem;
    line-height: 1.3;
    font-weight: 600;
    letter-spacing: 0.3px;
}

.modal-ref .header-ref-badge.ref-badge-na {
    padding: 0.35rem 0.75rem;
}

body.lp-dark .modal-ref,
body.modo-orbital .modal-ref {
    color: var(--text-color);
}

.modal-apps-specs {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 2px solid var(--material-surface-border);
    transition: border-color 0.5s ease;
}

.modal-apps-specs .app-brand-header {
    font-size: 0.75rem;
    margin-top: 1.25rem;
    margin-bottom: 0.75rem;
    padding: 0.65rem 0;
    background: transparent;
    border-bottom: 1px solid var(--material-surface-border);
    border-radius: 0;
    color: var(--text-color);
    font-weight: 700;
    opacity: 0.85;
    letter-spacing: 1px;
    transition: all 0.3s ease;
}

.modal-apps-specs .applications-list-container>.app-brand-header:first-child {
    margin-top: 0;
}

body.lp-dark .modal-apps-specs .app-brand-header,
body.modo-orbital .modal-apps-specs .app-brand-header {
    color: var(--text-color);
}

.modal-counter-wrapper {
    width: 100%;
    text-align: center;
    font-size: 0.85rem;
    color: var(--text-color);
    opacity: 0.8;
    padding-top: 0.75rem;
    flex-shrink: 0;
    transition: color 0.5s ease, opacity 0.5s ease;
    border-top: 1px solid rgba(var(--material-surface-light-rgb), 0.1);
}

.modal-counter-wrapper .carousel-counter {
    display: inline-block;
    background-color: var(--input-bg);
    padding: 5px 12px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.8rem;
    transition: background-color 0.5s ease, transform 0.2s ease;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    border: 1px solid var(--material-surface-border);
}

.modal-counter-wrapper .carousel-counter:hover {
    transform: scale(1.05);
}

#guide-modal .modal-content {
    max-width: 800px;
}

#guide-modal .usage-guide-content {
    font-size: 0.9rem;
    line-height: 1.6;
    opacity: 0.9;
    padding-left: 5px;
    border-top: none;
    padding-top: 0;
    flex-grow: 1;
    overflow-y: auto;
    min-height: 0;
    padding-right: 8px;
    color: var(--text-color);
    transition: color 0.5s ease, opacity 0.5s ease;
}

#guide-modal .usage-guide-content p {
    margin-bottom: 0.75rem;
}

#guide-modal .usage-guide-content ul {
    list-style: none;
    padding-left: 0;
}

#guide-modal .usage-guide-content li {
    margin-bottom: 0.6rem;
    padding-left: 1.5rem;
    position: relative;
}

#guide-modal .usage-guide-content li::before {
    content: '九';
    position: absolute;
    left: 0;
    top: 1px;
    font-size: 1em;
}

#guide-modal .usage-guide-content strong {
    font-weight: 600;
    color: var(--text-color);
    transition: color 0.5s ease;
}

body.lp-dark #guide-modal .usage-guide-content strong,
body.modo-orbital #guide-modal .usage-guide-content strong {
    color: var(--text-color);
}

@media (max-width: 650px) {
    .modal-content {
        max-width: 90vw;
        max-height: 85vh;
        padding: 1rem;
    }

    .modal-layout-wrapper {
        grid-template-columns: 1fr;
        gap: 1rem;
    }

    .modal-close-btn {
        font-size: 1.5rem;
        top: 0.3rem;
        right: 0.3rem;
    }

    .modal-ref .header-ref-badge {
        font-size: 0.8rem;
    }

    .modal-image-carousel {
        order: -1;
        margin-bottom: 0;
    }

    .modal-counter-wrapper {
        order: 2;
    }
}

@keyframes open-lid {
    0% {
        transform: rotate(0deg) translateY(0px) translateX(0px)
    }

    30% {
        transform: rotate(-25deg) translateY(-4px) translateX(-2px)
    }

    70% {
        transform: rotate(-25deg) translateY(-4px) translateX(-2px)
    }

    100% {
        transform: rotate(0deg) translateY(0px) translateX(0px)
    }
}

@keyframes shake-body {

    0%,
    100% {
        transform: translateX(0)
    }

    25% {
        transform: translateX(-1px)
    }

    75% {
        transform: translateX(1px)
    }
}

@keyframes spark-fade-out {
    0% {
        opacity: 1;
        transform: translate(0, 0) scale(1);
    }

    100% {
        opacity: 0;
        transform: translate(var(--spark-x), var(--spark-y)) scale(0.5);
    }
}

.spark {
    position: absolute;
    border-radius: 50%;
    opacity: 0;
    animation: spark-fade-out 0.6s ease-out forwards;
    box-shadow: 0 0 4px currentColor, 0 0 8px currentColor;
}

.animate-lid {
    animation: open-lid 0.8s ease-in-out;
}

.animate-body {
    animation: shake-body 0.2s ease-in-out 3;
    animation-delay: 0.1s;
}

body:not(.lp-dark):not(.modo-orbital) .ripple {
    background-color: var(--material-ripple-light);
}

body.lp-dark .ripple,
body.modo-orbital .ripple {
    background-color: var(--material-ripple-dark);
}

.ripple {
    position: absolute;
    border-radius: 50%;
    transform: scale(0);
    animation: ripple-effect 0.6s linear;
    pointer-events: none;
}

@keyframes ripple-effect {
    to {
        transform: scale(4);
        opacity: 0;
    }
}

.lp-icon-sun {
    stroke: var(--icon-sun-stroke);
}

.lp-icon-moon {
    stroke: var(--icon-moon-stroke);
}

.lp-icon-palette {
    stroke: var(--icon-palette-stroke);
}

.lp-icon-arrow {
    stroke: var(--icon-arrow-stroke);
    animation: var(--arrow-glow-animation);
}

.lp-icon-info {
    stroke: var(--icon-info-stroke);
}

#upBtn {
    opacity: 0;
    transform: translateY(10px);
    pointer-events: none;
}

#upBtn.show {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

.side-menu {
    position: fixed;
    top: 0;
    left: -300px;
    width: 280px;
    height: 100%;
    background-color: var(--material-surface-light);
    border-right: 1px solid var(--material-surface-border);
    box-shadow: var(--elevation-4);
    z-index: 11000;
    transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.5s ease, border-color 0.5s ease;
    display: flex;
    flex-direction: column;
}

.side-menu.open {
    left: 0;
}

.side-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--material-surface-border);
    flex-shrink: 0;
    transition: border-color 0.5s ease;
}

.side-menu-header h2 {
    font-size: 1.1rem;
    font-weight: 600;
    margin: 0;
    color: var(--text-color);
    transition: color 0.5s ease;
}

body.lp-dark .side-menu-header h2,
body.modo-orbital .side-menu-header h2 {
    color: var(--text-color);
}

.menu-close-btn {
    background: none;
    border: none;
    font-size: 1.8rem;
    line-height: 1;
    color: var(--text-color);
    opacity: 0.6;
    cursor: pointer;
    padding: 0.2rem;
    transition: opacity 0.2s ease, color 0.5s ease;
}

.menu-close-btn:hover {
    opacity: 1;
}

.side-menu-list {
    list-style: none;
    padding: 0.75rem 0;
    margin: 0;
    overflow-y: auto;
    flex-grow: 1;
}

.side-menu-list li {
    margin: 0;
}

.side-menu-link {
    display: block;
    width: 100%;
    text-align: left;
    padding: 0.75rem 1.5rem;
    font-size: 0.95rem;
    color: var(--text-color);
    background: none;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s ease, color 0.5s ease;
}

.side-menu-link:hover {
    background-color: var(--btn-google-hover-bg);
}

.side-menu-overlay {
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 10999;
    cursor: pointer;
    transition: opacity 0.3s ease;
    opacity: 0;
    display: none;
}

.side-menu-overlay.visible {
    opacity: 1;
    display: block;
}

@keyframes fadeDown {
    0% {
        opacity: 0;
        transform: translateY(-8px);
    }

    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes bounceHeader {
    0% {
        transform: scale(1)
    }

    30% {
        transform: scale(1.15)
    }

    50% {
        transform: scale(.95)
    }

    70% {
        transform: scale(1.1)
    }

    100% {
        transform: scale(1)
    }
}

@keyframes arrow-glow {
    0% {
        filter: drop-shadow(0 0 2px rgba(59, 130, 246, .4))
    }

    50% {
        filter: drop-shadow(0 0 6px rgba(59, 130, 246, .8))
    }

    100% {
        filter: drop-shadow(0 0 2px rgba(59, 130, 246, .4))
    }
}

@keyframes arrow-glow-dark {
    0% {
        filter: drop-shadow(0 0 2px rgba(248, 113, 113, .4))
    }

    50% {
        filter: drop-shadow(0 0 6px rgba(248, 113, 113, .8))
    }

    100% {
        filter: drop-shadow(0 0 2px rgba(248, 113, 113, .4))
    }
}

@keyframes arrow-glow-orbital {
    0% {
        filter: drop-shadow(0 0 3px rgba(59, 130, 246, .5))
    }

    50% {
        filter: drop-shadow(0 0 8px rgba(59, 130, 246, .9))
    }

    100% {
        filter: drop-shadow(0 0 3px rgba(59, 130, 246, .5))
    }
}

body.modo-orbital {
    --arrow-glow-animation: arrow-glow-orbital 1.5s ease-in-out infinite alternate;
}

body.lp-dark {
    --arrow-glow-animation: arrow-glow-dark 1.5s ease-in-out infinite alternate;
}

@media (max-width: 768px) {

    /* Layout */
    .main-layout {
        flex-direction: column;
        gap: 0.8rem;
        align-items: stretch;
        padding: 0 0.4rem 80px;
    }

    /* Header sticky on mobile */
    header {
        position: sticky;
        top: 0;
        z-index: 100;
        margin-bottom: 0.8rem;
        padding: 0.6rem 1rem;
        backdrop-filter: blur(10px);
        background: rgba(var(--material-surface-light-rgb), 0.95);
    }

    body.lp-dark header,
    body.modo-orbital header {
        background: rgba(var(--material-surface-light-rgb), 0.98);
    }

    header h1 {
        font-size: 20px;
        flex-wrap: wrap;
    }

    .header-subtitle {
        font-size: 0.65rem;
        width: 100%;
        border-left: none;
        padding-left: 0;
        margin-left: 0;
        margin-top: 2px;
    }

    /* Filters */
    .filters-column {
        flex-basis: auto;
        width: 100%;
    }

    .glass {
        padding: 0.6rem 0.8rem;
    }

    .input-group-horizontal {
        flex-direction: column;
        gap: 0.3rem;
    }

    /* Results */
    .results-wrapper {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 0.7rem;
    }

    .results-header-card {
        margin-top: 0;
        padding: 0.4rem 0.8rem;
    }

    .result-count-container {
        font-size: 0.8rem;
    }

    /* View buttons */
    .view-toggle-buttons {
        gap: 0.4rem;
    }

    .view-btn {
        width: 36px;
        height: 36px;
    }

    #historialBtn,
    #compareBtn {
        padding: 5px 8px;
        font-size: 0.8rem;
    }

    /* Modals full screen on mobile */
    .modal-content {
        width: 100vw;
        max-width: 100vw;
        height: 100vh;
        max-height: 100vh;
        border-radius: 0;
        margin: 0;
    }

    /* Center manufacturer tags */
    .manufacturer-tags-container,
    .brand-tags-container {
        justify-content: center;
    }

    /* Pagination */
    .pagination-container {
        gap: 0.3rem;
    }

    .page-btn {
        padding: 6px 8px;
        font-size: 0.8rem;
        min-width: 32px;
    }
}

@media (max-width: 600px) {

    .form-input,
    .position-btn {
        font-size: 1rem;
        padding: 0.75rem;
    }
}

@media (max-width: 480px) {

    /* Base font size */
    body {
        font-size: 13px;
    }

    /* Header */
    header {
        padding: 0.6rem 0.8rem;
    }

    header h1 {
        font-size: 18px;
    }

    .header-subtitle {
        font-size: 0.6rem;
    }

    .header-menu-btn {
        width: 34px;
        height: 34px;
    }

    .header-menu-btn svg {
        width: 16px;
        height: 16px;
    }

    /* Position buttons stacked */
    .position-container {
        flex-direction: column;
        gap: 0.35rem;
    }

    .position-btn {
        width: 100%;
    }

    /* Results grid single column */
    .results-wrapper {
        grid-template-columns: 1fr;
    }

    /* Compact cards */
    .result-card {
        padding: 0.5rem;
    }

    /* Smaller badges */
    .ref-badge {
        font-size: 0.65rem;
        padding: 3px 6px;
    }

    .position-badge {
        font-size: 0.7rem;
        padding: 3px 8px;
    }

    /* Compact buttons */
    .view-btn {
        width: 34px;
        height: 34px;
    }

    .view-btn svg {
        width: 16px;
        height: 16px;
    }

    /* Pagination ultra compact */
    .page-btn {
        padding: 5px 6px;
        font-size: 0.75rem;
        min-width: 28px;
    }

    .header-left-controls {
        gap: 8px;
    }

    /* --- CAMBIO 3 --- */
    header h1 {
        font-size: 1rem;
        gap: 4px;
        padding-left: 0;
        padding-right: 0;
        justify-content: center;
        flex-grow: 1;
    }

    /* --- CAMBIO 4 --- */
    .header-subtitle {
        font-size: 0.7rem;
        display: block;
        margin-top: 0;
        padding-left: 0;
        opacity: 0.7;
        flex-basis: 100%;
        text-align: center;
    }

    .header-spacer {
        min-width: 36px;
    }
}

@media (min-width: 768px) {
    .modal-content {
        max-width: 1100px;
    }

    #guide-modal .modal-content {
        max-width: 800px;
    }
}

#orbitalBtn.active {
    background-color: var(--brand-color-3);
    border-color: var(--brand-color-3);
    box-shadow: 0 4px 6px rgba(232, 62, 140, 0.4);
}

body:not(.lp-dark):not(.modo-orbital) #orbitalBtn.active .lp-icon-palette {
    stroke: #ffffff;
}

/* Badge colors - Light Mode */
.ref-k {
    background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
    color: #FFFFFF;
    box-shadow: 0 2px 6px rgba(239, 68, 68, 0.3);
}

.ref-inc {
    background: linear-gradient(135deg, #1976d2 0%, #0d47a1 100%);
    color: #FFFFFF;
    box-shadow: 0 2px 6px rgba(25, 118, 210, 0.3);
}

.ref-bp {
    background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
    color: #FFFFFF;
    box-shadow: 0 2px 6px rgba(108, 117, 125, 0.3);
}

.ref-bex {
    background: linear-gradient(135deg, #64b5f6 0%, #42a5f5 100%);
    color: #000000;
    box-shadow: 0 2px 6px rgba(100, 181, 246, 0.3);
}

/* Enhanced badges for Dark Mode */
body.lp-dark .ref-k {
    background: linear-gradient(135deg, #f87171 0%, #ef4444 100%);
    box-shadow: 0 3px 8px rgba(248, 113, 113, 0.4);
}

body.lp-dark .ref-inc {
    background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
    box-shadow: 0 3px 8px rgba(96, 165, 250, 0.4);
}

body.lp-dark .ref-bp {
    background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
    box-shadow: 0 3px 8px rgba(156, 163, 175, 0.4);
}

body.lp-dark .ref-bex {
    background: linear-gradient(135deg, #93c5fd 0%, #60a5fa 100%);
    color: #000000;
    box-shadow: 0 3px 8px rgba(147, 197, 253, 0.4);
}

/* Enhanced badges for Orbital Mode */
body.modo-orbital .ref-k {
    background: linear-gradient(135deg, #f87171 0%, #ef4444 100%);
    box-shadow: 0 3px 8px rgba(248, 113, 113, 0.35);
}

body.modo-orbital .ref-inc {
    background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
    box-shadow: 0 3px 8px rgba(96, 165, 250, 0.35);
}

body.modo-orbital .ref-bp {
    background: linear-gradient(135deg, #94a3b8 0%, #64748b 100%);
    box-shadow: 0 3px 8px rgba(148, 163, 184, 0.35);
}

body.modo-orbital .ref-bex {
    background: linear-gradient(135deg, #7dd3fc 0%, #38bdf8 100%);
    color: #0f172a;
    box-shadow: 0 3px 8px rgba(125, 211, 252, 0.35);
}

.ref-default {
    background-color: var(--badge-menta-bg);
    color: var(--badge-menta-text);
}

.ref-badge-na {
    background-color: var(--badge-menta-bg);
    color: var(--badge-menta-text);
    border: none;
}

.modal-apps-specs .modal-ref-container {
    display: flex;
    flex-wrap: wrap;
    gap: 0.3rem;
    justify-content: flex-start;
    text-align: left;
}

.modal-apps-specs .spec-ref-badge {
    font-size: 0.7rem;
    padding: 0.15rem 0.5rem;
    line-height: 1.3;
}

.modal-apps-specs .spec-ref-badge.ref-badge-na {
    padding: 0.15rem 0.5rem;
}

/* --- INICIO: MEJORA #9 (WATERMARK SVG) --- */
.card-thumbnail,
.modal-image-carousel {
    position: relative;
    overflow: hidden;
}

.card-thumbnail::after,
.modal-image-carousel::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-30deg);
    width: 60%;
    height: 60%;
    background: var(--watermark-mask-color);

    /* SVG Incrustado como Data URI para mayor robustez */
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 36 24'%3E%3Cpath d='M8.98885921,23.8523026 C8.8942483,23.9435442 8.76801031,24 8.62933774,24 L2.03198365,24 C1.73814918,24 1.5,23.7482301 1.5,23.4380086 C1.5,23.2831829 1.55946972,23.1428989 1.65570253,23.0416777 L13.2166154,12.4291351 C13.3325814,12.3262031 13.4061076,12.1719477 13.4061076,11.999444 C13.4061076,11.8363496 13.3401502,11.6897927 13.2352673,11.587431 L1.68841087,0.990000249 C1.57298556,0.88706828 1.5,0.733668282 1.5,0.561734827 C1.5,0.251798399 1.73814918,0.000028513 2.03198365,0.000028513 L8.62933774,0.000028513 C8.76855094,0.000028513 8.89532956,0.0561991444 8.98994048,0.148296169 L21.4358709,11.5757407 C21.548593,11.6783875 21.6196864,11.8297916 21.6196864,11.999444 C21.6196864,12.1693815 21.5483227,12.3219261 21.4350599,12.4251432 L8.98885921,23.8523026 Z M26.5774333,23.8384453 L20.1765996,17.9616286 C20.060093,17.8578413 19.9865669,17.7038710 19.9865669,17.5310822 C19.9865669,17.3859509 20.0390083,17.2536506 20.1246988,17.153855 L23.4190508,14.1291948 C23.5163648,14.0165684 23.6569296,13.945571 23.8131728,13.945571 C23.9602252,13.945571 24.0929508,14.0082997 24.1894539,14.1092357 L33.861933,22.9913237 C33.9892522,23.0939706 34.0714286,23.2559245 34.0714286,23.4381226 C34.0714286,23.748059 33.8332794,23.9998289 33.5394449,23.9998289 L26.9504707,23.9998289 C26.8053105,23.9998289 26.6733958,23.9382408 26.5774333,23.8384453 Z M26.5774333,0.161098511 C26.6733958,0.0615881034 26.8053105,0 26.9504707,0 L33.5394449,0 C33.8332794,0 34.0714286,0.251769886 34.0714286,0.561706314 C34.0714286,0.743904453 33.9892522,0.905573224 33.861933,1.00822006 L24.1894539,9.89030807 C24.0929508,9.99152926 23.9602252,10.0542579 23.8131728,10.0542579 C23.6569296,10.0542579 23.5163648,9.98354562 23.4190508,9.87063409 L20.1246988,6.8459739 C20.0390083,6.74617837 19.9865669,6.613878 19.9865669,6.46874677 C20.060093,6.14198767 20.1765996,6.03848544 L26.5774333,0.161098511 Z'/%3E%3C/svg%3E");
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 36 24'%3E%3Cpath d='M8.98885921,23.8523026 C8.8942483,23.9435442 8.76801031,24 8.62933774,24 L2.03198365,24 C1.73814918,24 1.5,23.7482301 1.5,23.4380086 C1.5,23.2831829 1.55946972,23.1428989 1.65570253,23.0416777 L13.2166154,12.4291351 C13.3325814,12.3262031 13.4061076,12.1719477 13.4061076,11.999444 C13.4061076,11.8363496 13.3401502,11.6897927 13.2352673,11.587431 L1.68841087,0.990000249 C1.57298556,0.88706828 1.5,0.733668282 1.5,0.561734827 C1.5,0.251798399 1.73814918,0.000028513 2.03198365,0.000028513 L8.62933774,0.000028513 C8.76855094,0.000028513 8.89532956,0.0561991444 8.98994048,0.148296169 L21.4358709,11.5757407 C21.548593,11.6783875 21.6196864,11.8297916 21.6196864,11.999444 C21.6196864,12.1693815 21.5483227,12.3219261 21.4350599,12.4251432 L8.98885921,23.8523026 Z M26.5774333,23.8384453 L20.1765996,17.9616286 C20.060093,17.8578413 19.9865669,17.7038710 19.9865669,17.5310822 C19.9865669,17.3859509 20.0390083,17.2536506 20.1246988,17.153855 L23.4190508,14.1291948 C23.5163648,14.0165684 23.6569296,13.945571 23.8131728,13.945571 C23.9602252,13.945571 24.0929508,14.0082997 24.1894539,14.1092357 L33.861933,22.9913237 C33.9892522,23.0939706 34.0714286,23.2559245 34.0714286,23.4381226 C34.0714286,23.748059 33.8332794,23.9998289 33.5394449,23.9998289 L26.9504707,23.9998289 C26.8053105,23.9998289 26.6733958,23.9382408 26.5774333,23.8384453 Z M26.5774333,0.161098511 C26.6733958,0.0615881034 26.8053105,0 26.9504707,0 L33.5394449,0 C33.8332794,0 34.0714286,0.251769886 34.0714286,0.561706314 C34.0714286,0.743904453 33.9892522,0.905573224 33.861933,1.00822006 L24.1894539,9.89030807 C24.0929508,9.99152926 23.9602252,10.0542579 23.8131728,10.0542579 C23.6569296,10.0542579 23.5163648,9.98354562 23.4190508,9.87063409 L20.1246988,6.8459739 C20.0390083,6.74617837 19.9865669,6.613878 19.9865669,6.46874677 C20.060093,6.14198767 20.1765996,6.03848544 L26.5774333,0.161098511 Z'/%3E%3C/svg%3E");

    -webkit-mask-size: contain;
    mask-size: contain;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-position: center;
    pointer-events: none;
    z-index: 1;
    transition: background 0.5s ease;
}

/* --- FIN: MEJORA #9 --- */

.modal-image-carousel .carousel-nav-btn {
    z-index: 2;
}

.favorite-btn {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    z-index: 10;
    width: 36px;
    height: 36px;
    padding: 6px;
    border-radius: 50%;
    background-color: transparent;
    border: none;
    color: var(--text-color);
    opacity: 0.5;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.favorite-btn:hover {
    opacity: 1;
    transform: scale(1.15);
    background-color: rgba(var(--material-surface-light-rgb), 0.5);
    backdrop-filter: blur(2px);
}

.favorite-btn .heart-icon {
    width: 22px;
    height: 22px;
    fill: transparent;
    stroke: var(--text-color);
    stroke-width: 2;
    transition: all 0.2s ease;
}

.favorite-btn.active {
    opacity: 1;
    transform: scale(1.05);
}

.favorite-btn.active .heart-icon {
    fill: #ff0000;
    stroke: #ff0000;
    filter: drop-shadow(0 1px 2px rgba(255, 0, 0, 0.5));
}

body.lp-dark .favorite-btn:not(.active),
body.modo-orbital .favorite-btn:not(.active) {
    opacity: 0.7;
}

/* === 游댮 INICIO BLOQUE CORREGIDO CORAZONES === */

/* --- 1. Coraz칩n en la TARJETA de producto --- */
body:not(.lp-dark):not(.modo-orbital) .favorite-btn:not(.active) .heart-icon {
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.3));
}

/* CORRECTO: Forzar a negro en dark/orbital para que contraste con im치genes claras */
body.lp-dark .favorite-btn:not(.active) .heart-icon,
body.modo-orbital .favorite-btn:not(.active) .heart-icon {
    stroke: #000;
    /* Forzado a negro para visibilidad en im치genes claras */
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.3));
    /* Sombra oscura */
}


/* --- 2. Coraz칩n en el BOT칍N DE FILTRO (header) --- */
.view-btn .heart-icon {
    width: 20px;
    height: 20px;
    transition: all 0.2s ease;
}

/* Base: usa el color de texto del tema (claro en modo oscuro, oscuro en modo claro) */
.view-btn .heart-icon path {
    fill: transparent;
    stroke: var(--text-color);
    stroke-width: 2;
    /* opacity: 0.6; */
    /* <-- La opacidad ahora se controla en .view-btn svg */
    transition: all 0.2s ease-out;
}

/* Sombra para modo claro */
body:not(.lp-dark):not(.modo-orbital) .view-btn#filtroFavoritosBtn:not(.active) .heart-icon {
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.3));
}

/* CORREGIDO: Sombra para modo oscuro/orbital */
body.lp-dark .view-btn#filtroFavoritosBtn:not(.active) .heart-icon,
body.modo-orbital .view-btn#filtroFavoritosBtn:not(.active) .heart-icon {
    /* Mantenemos la sombra, pero ahora usar치 el color de texto (claro) del tema */
    filter: drop-shadow(0 1px 1px rgba(255, 255, 255, 0.3));
}

/* --- FIN CORRECCI칍N 2 --- */

.view-btn#filtroFavoritosBtn:not(.active):hover .heart-icon {
    transform: scale(1.15);
}

.view-btn#filtroFavoritosBtn:not(.active):hover .heart-icon path {
    opacity: 1;
}

/* Estilos del bot칩n activo */
.view-btn#filtroFavoritosBtn.active {
    background-color: var(--input-bg);
    border-color: var(--material-surface-border);
    box-shadow: var(--elevation-1);
}

.view-btn#filtroFavoritosBtn.active .heart-icon {
    transform: scale(1.05);
}

/* CORRECCI칍N DE TYPO: Se elimin칩 "Filtro" extra */
.view-btn#filtroFavoritosBtn.active .heart-icon path {
    fill: #ff0000;
    stroke: #ff0000;
    opacity: 1;
    filter: drop-shadow(0 1px 2px rgba(255, 0, 0, 0.5));
}

/* === 游댮 FIN BLOQUE CORREGIDO CORAZONES === */


/* === Estilos para Historial de B칰squeda (Tarjeta) === */
.search-history-item {
    position: relative;
    padding-right: 28px;
    padding-top: 5px;
    padding-bottom: 5px;
}

.delete-history-item {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1.3rem;
    font-weight: 500;
    line-height: 1;
    color: var(--text-color);
    opacity: 0.5;
    transition: opacity 0.2s, transform 0.2s;
    cursor: pointer;
    padding: 2px 4px;
}

.delete-history-item:hover {
    opacity: 1;
    transform: translateY(-50%) scale(1.1);
    color: var(--btn-primary-bg);
}

/* --- Estilos para Etiquetas de Fabricante --- */
.manufacturer-tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    padding: 0.5rem 0;
    margin-top: -0.5rem;
    justify-content: center;
}

/* Asignar colores vibrantes y visibles */
.brand-tag[data-manufacturer="INC"] {
    --tag-brand-color: #3b82f6;
    --tag-brand-color-rgb: 59, 130, 246;
}

.brand-tag[data-manufacturer="K"] {
    --tag-brand-color: #ef4444;
    --tag-brand-color-rgb: 239, 68, 68;
}

.brand-tag[data-manufacturer="BP"] {
    --tag-brand-color: #8b5cf6;
    --tag-brand-color-rgb: 139, 92, 246;
}

.brand-tag[data-manufacturer="B"] {
    --tag-brand-color: #06b6d4;
    --tag-brand-color-rgb: 6, 182, 212;
}

/* Dark mode - colores a칰n m치s brillantes */
body.lp-dark .brand-tag[data-manufacturer="INC"],
body.modo-orbital .brand-tag[data-manufacturer="INC"] {
    --tag-brand-color: #60a5fa;
    --tag-brand-color-rgb: 96, 165, 250;
}

body.lp-dark .brand-tag[data-manufacturer="K"],
body.modo-orbital .brand-tag[data-manufacturer="K"] {
    --tag-brand-color: #f87171;
    --tag-brand-color-rgb: 248, 113, 113;
}

body.lp-dark .brand-tag[data-manufacturer="BP"],
body.modo-orbital .brand-tag[data-manufacturer="BP"] {
    --tag-brand-color: #a78bfa;
    --tag-brand-color-rgb: 167, 139, 250;
}

body.lp-dark .brand-tag[data-manufacturer="B"],
body.modo-orbital .brand-tag[data-manufacturer="B"] {
    --tag-brand-color: #22d3ee;
    --tag-brand-color-rgb: 34, 211, 238;
}

@media (max-width: 767px) {

    /* Esta regla asegura que las etiquetas de fabricante tambi칠n se centren */
    .manufacturer-tags-container {
        justify-content: center;
    }
}

/* --- 游댮 ESTILOS DE QR ELIMINADOS 游댮 --- */

/* ============================================
   COMPARADOR DE REFERENCIAS - ESTILOS
   ============================================ */

/* --- Bot칩n de Comparar en Results Header --- */
#compareBtn {
    position: relative;
    width: auto;
    display: none;
    /* Hidden by default, shown via JavaScript when count > 0 */
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-color);
    opacity: 0;
    transform: scale(0.95);
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1),
        opacity 0.25s ease,
        transform 0.25s ease;
}

.compare-icon {
    width: 18px;
    height: 18px;
    stroke: var(--text-color);
    transition: stroke 0.3s ease;
    flex-shrink: 0;
}

#compareBtn:hover {
    background-color: var(--btn-google-hover-bg);
    opacity: 1;
    transform: translateY(-1px);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
}

#compareBtn:hover .compare-icon {
    stroke: var(--text-color);
}

#compareBtn.has-selection {
    background: linear-gradient(135deg,
            rgba(59, 130, 246, 0.1) 0%,
            rgba(37, 99, 235, 0.12) 100%);
    border-color: rgba(59, 130, 246, 0.35);
    opacity: 1;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
}

#compareBtn.has-selection .compare-icon {
    stroke: #2563eb;
}

body.lp-dark #compareBtn.has-selection {
    background: linear-gradient(135deg,
            rgba(59, 130, 246, 0.15) 0%,
            rgba(37, 99, 235, 0.18) 100%);
    border-color: rgba(59, 130, 246, 0.4);
}

body.lp-dark #compareBtn.has-selection .compare-icon {
    stroke: #60a5fa;
}

body.modo-orbital #compareBtn.has-selection {
    background: linear-gradient(135deg,
            rgba(59, 130, 246, 0.12) 0%,
            rgba(37, 99, 235, 0.15) 100%);
    border-color: rgba(59, 130, 246, 0.38);
}

body.modo-orbital #compareBtn.has-selection .compare-icon {
    stroke: #3b82f6;
}

/* --- Badge Contador de Comparaci칩n --- */
.compare-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
    color: #ffffff;
    font-size: 0.7rem;
    font-weight: 700;
    padding: 3px 7px;
    border-radius: 12px;
    min-width: 20px;
    height: 20px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    box-shadow: 0 3px 8px rgba(59, 130, 246, 0.5),
        0 0 0 2px var(--material-surface-light);
    animation: scaleIn 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 10;
}

body.lp-dark .compare-count {
    box-shadow: 0 3px 8px rgba(59, 130, 246, 0.6),
        0 0 0 2px #111111;
}

body.modo-orbital .compare-count {
    box-shadow: 0 3px 8px rgba(59, 130, 246, 0.5),
        0 0 0 2px #1e293b;
}

@keyframes scaleIn {
    0% {
        transform: scale(0) rotate(-10deg);
        opacity: 0;
    }

    50% {
        transform: scale(1.15) rotate(5deg);
    }

    100% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
    }
}

/* --- Bot칩n de Comparar en Tarjetas de Resultado --- */
.compare-checkbox-btn {
    position: absolute;
    top: 10px;
    right: 50px;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: rgba(var(--material-surface-light-rgb), 0.95);
    border: 2px solid var(--material-surface-border);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

.compare-checkbox-btn svg {
    width: 18px;
    height: 18px;
    stroke: var(--text-color);
    opacity: 0.6;
    transition: all 0.3s ease;
}

.compare-checkbox-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    border-color: rgba(59, 130, 246, 0.5);
}

.compare-checkbox-btn:hover svg {
    opacity: 1;
    stroke: #3b82f6;
}

.compare-checkbox-btn.selected {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    border-color: #2563eb;
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
}

.compare-checkbox-btn.selected svg {
    stroke: #ffffff;
    opacity: 1;
}

/* --- Modal de Comparaci칩n --- */
.comparison-modal-content {
    max-width: 95vw;
    max-height: 90vh;
    width: 1200px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.comparison-controls {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 1rem;
    gap: 0.5rem;
}

.clear-comparison-btn {
    padding: 8px 16px;
    border-radius: 8px;
    border: 1.5px solid var(--material-surface-border);
    background: transparent;
    color: var(--text-color);
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    gap: 6px;
}

.clear-comparison-btn svg {
    width: 16px;
    height: 16px;
    stroke: currentColor;
}

.clear-comparison-btn:hover {
    background-color: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.4);
    color: #ef4444;
    transform: translateY(-1px);
    box-shadow: 0 2px 6px rgba(239, 68, 68, 0.2);
}

/* --- Wrapper de Tabla Comparativa --- */
.comparison-table-wrapper {
    flex: 1;
    overflow-x: auto;
    overflow-y: auto;
    border: 1px solid var(--material-surface-border);
    border-radius: 8px;
    background-color: var(--input-bg);
}

.comparison-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 600px;
}

.comparison-table th,
.comparison-table td {
    padding: 12px 16px;
    text-align: left;
    border-bottom: 1px solid var(--material-surface-border);
    vertical-align: top;
}

.comparison-table th {
    background-color: var(--material-surface-light);
    font-weight: 600;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-color);
    opacity: 0.9;
    position: sticky;
    top: 0;
    z-index: 10;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.comparison-table td {
    font-size: 0.9rem;
    color: var(--text-color);
}

.comparison-table tr:last-child td {
    border-bottom: none;
}

.comparison-table tr:hover td {
    background-color: rgba(var(--material-surface-light-rgb), 0.5);
}

/* --- Columna de Etiquetas (Primera columna) --- */
.comparison-table th:first-child,
.comparison-table td:first-child {
    font-weight: 600;
    background-color: var(--material-surface-light);
    position: sticky;
    left: 0;
    z-index: 5;
    min-width: 140px;
    box-shadow: 2px 0 4px rgba(0, 0, 0, 0.05);
}

.comparison-table th:first-child {
    z-index: 15;
}

/* --- Contenido de Celdas --- */
.comparison-cell-refs {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
}

/* Difference Highlighting */
.comparison-cell-diff {
    background: linear-gradient(135deg,
            rgba(255, 193, 7, 0.08) 0%,
            rgba(255, 160, 0, 0.1) 100%);
    border-left: 3px solid #ffc107 !important;
    padding-left: 12px !important;
    transition: all 0.3s ease;
}

.comparison-cell-match {
    background: linear-gradient(135deg,
            rgba(76, 175, 80, 0.06) 0%,
            rgba(56, 142, 60, 0.08) 100%);
    border-left: 3px solid #4caf50 !important;
    padding-left: 12px !important;
    transition: all 0.3s ease;
}

body.lp-dark .comparison-cell-diff {
    background: linear-gradient(135deg,
            rgba(255, 193, 7, 0.12) 0%,
            rgba(255, 160, 0, 0.15) 100%);
}

body.lp-dark .comparison-cell-match {
    background: linear-gradient(135deg,
            rgba(76, 175, 80, 0.1) 0%,
            rgba(56, 142, 60, 0.12) 100%);
}

/* Row stagger animation */
@keyframes slideInRow {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.comparison-table tbody tr {
    animation: slideInRow 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.comparison-table tbody tr:nth-child(1) {
    animation-delay: 0ms;
}

.comparison-table tbody tr:nth-child(2) {
    animation-delay: 50ms;
}

.comparison-table tbody tr:nth-child(3) {
    animation-delay: 100ms;
}

.comparison-table tbody tr:nth-child(4) {
    animation-delay: 150ms;
}

.comparison-table tbody tr:nth-child(5) {
    animation-delay: 200ms;
}

.comparison-table tbody tr:nth-child(6) {
    animation-delay: 250ms;
}

.comparison-table tbody tr:nth-child(7) {
    animation-delay: 300ms;
}

.comparison-table tbody tr:nth-child(8) {
    animation-delay: 350ms;
}

.comparison-cell-refs .ref-badge {
    font-size: 0.75rem;
    padding: 4px 8px;
}

.comparison-cell-position .position-badge {
    display: inline-block;
}

.comparison-cell-image {
    text-align: center;
}

.comparison-cell-image img {
    max-width: 150px;
    height: auto;
    border-radius: 6px;
    border: 1px solid var(--material-surface-border);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
}

.comparison-cell-image img:hover {
    transform: scale(1.05);
}

.comparison-cell-apps {
    max-height: 200px;
    overflow-y: auto;
    font-size: 0.85rem;
    line-height: 1.5;
}

.comparison-cell-apps::-webkit-scrollbar {
    width: 6px;
}

.comparison-cell-apps::-webkit-scrollbar-track {
    background: var(--input-bg);
    border-radius: 3px;
}

.comparison-cell-apps::-webkit-scrollbar-thumb {
    background: var(--material-surface-border);
    border-radius: 3px;
}

.comparison-cell-apps::-webkit-scrollbar-thumb:hover {
    background: var(--input-focus-border);
}

.comparison-app-item {
    padding: 4px 0;
    border-bottom: 1px solid rgba(var(--material-surface-light-rgb), 0.3);
}

.comparison-app-item:last-child {
    border-bottom: none;
}

.comparison-remove-btn {
    background: none;
    border: none;
    color: var(--text-color);
    opacity: 0.6;
    cursor: pointer;
    font-size: 1.2rem;
    padding: 4px 8px;
    transition: all 0.2s ease;
    line-height: 1;
}

.comparison-remove-btn:hover {
    opacity: 1;
    color: #ef4444;
    transform: scale(1.1);
}

/* --- Estado Vac칤o --- */
.comparison-empty-state {
    text-align: center;
    padding: 3rem 1rem;
    color: var(--text-color);
    opacity: 0.7;
}

.comparison-empty-state svg {
    width: 64px;
    height: 64px;
    stroke: currentColor;
    margin-bottom: 1rem;
    opacity: 0.5;
}

.comparison-empty-state p {
    font-size: 1.1rem;
    font-weight: 500;
    margin-bottom: 0.5rem;
}

.comparison-empty-state span {
    font-size: 0.9rem;
    opacity: 0.8;
}

/* --- Responsive Design --- */
/* Tablet Optimization (769px - 1024px) */
@media (min-width: 769px) and (max-width: 1024px) {

    /* Layout adjustments */
    .main-layout {
        gap: 0.8rem;
    }

    .filters-column {
        flex: 0 0 240px;
    }

    /* Glass panels */
    .glass {
        padding: 0.65rem 0.85rem;
    }

    /* Typography scaling */
    body {
        font-size: 13.5px;
    }

    header h1 {
        font-size: 22px;
    }

    .header-subtitle {
        font-size: 0.68rem;
    }

    .filter-title {
        font-size: 0.85rem;
    }

    .form-input {
        font-size: 0.85rem;
        padding: 5px 9px;
    }

    /* Results grid */
    .results-wrapper {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 0.7rem;
    }

    /* Reduce button sizes slightly */
    .view-btn {
        width: 38px;
        height: 38px;
    }

    .view-btn svg {
        width: 18px;
        height: 18px;
    }

    /* Position buttons */
    .position-btn {
        font-size: 0.75rem;
        padding: 7px 10px;
    }

    /* Brand tags */
    .brand-tag {
        font-size: 0.68rem;
        padding: 4px 10px;
    }

    /* Pagination */
    .page-btn {
        padding: 6px 10px;
        font-size: 0.8rem;
    }
}

@media (max-width: 1024px) {
    .comparison-modal-content {
        width: 95vw;
    }

    .comparison-table th,
    .comparison-table td {
        padding: 10px 12px;
        font-size: 0.85rem;
    }

    .comparison-cell-image img {
        max-width: 120px;
    }
}

@media (max-width: 767px) {
    .comparison-modal-content {
        width: 100vw;
        max-width: 100vw;
        height: 100vh;
        max-height: 100vh;
        border-radius: 0;
    }

    .comparison-controls {
        flex-direction: column;
    }

    .clear-comparison-btn {
        width: 100%;
        justify-content: center;
    }

    .comparison-table {
        min-width: 100%;
        display: block;
    }

    .comparison-table thead,
    .comparison-table tbody,
    .comparison-table tr {
        display: block;
    }

    .comparison-table th {
        position: static;
        display: none;
    }

    .comparison-table tr {
        margin-bottom: 1rem;
        border: 1px solid var(--material-surface-border);
        border-radius: 8px;
        overflow: hidden;
    }

    .comparison-table td {
        display: block;
        position: relative;
        padding-left: 50%;
        text-align: left;
        border: none;
        border-bottom: 1px solid var(--material-surface-border);
    }

    .comparison-table td:last-child {
        border-bottom: none;
    }

    .comparison-table td:before {
        content: attr(data-label);
        position: absolute;
        left: 12px;
        width: 45%;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.75rem;
        opacity: 0.8;
    }

    .comparison-table td:first-child {
        position: static;
        box-shadow: none;
        background: var(--input-focus-border);
        color: white;
        font-weight: 700;
        text-align: center;
        padding: 12px;
        font-size: 1rem;
    }

    .comparison-table td:first-child:before {
        display: none;
    }

    .comparison-cell-image img {
        max-width: 100%;
    }

    .compare-checkbox-btn svg {
        width: 14px;
        height: 14px;
    }
}

/* --- Animaciones --- */
@keyframes fadeInTable {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.comparison-table {
    animation: fadeInTable 0.4s ease-out;
}

/* --- Search History Redesign --- */
.search-history {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 10px;
    padding: 0 4px;
}

.search-history-item {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: 20px;
    background-color: rgba(var(--material-surface-light-rgb), 0.5);
    border: 1px solid var(--material-surface-border);
    color: var(--text-color);
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
}

.search-history-item:hover {
    background-color: rgba(var(--material-surface-light-rgb), 0.8);
    border-color: var(--input-focus-border);
    transform: translateY(-1px);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

.history-icon {
    width: 14px;
    height: 14px;
    opacity: 0.6;
    flex-shrink: 0;
}

.history-remove-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: none;
    background: transparent;
    color: var(--text-color);
    opacity: 0.4;
    cursor: pointer;
    padding: 0;
    margin-left: 2px;
    transition: all 0.2s ease;
}

.history-remove-btn:hover {
    background-color: rgba(0, 0, 0, 0.1);
    opacity: 1;
    color: #ef4444;
}

.history-remove-btn svg {
    width: 12px;
    height: 12px;
    stroke-width: 2.5;
}

/* Dark Mode Adjustments */
body.lp-dark .search-history-item,
body.modo-orbital .search-history-item {
    background-color: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.1);
}

body.lp-dark .search-history-item:hover,
body.modo-orbital .search-history-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
}

body.lp-dark .history-remove-btn:hover,
body.modo-orbital .history-remove-btn:hover {
    background-color: rgba(255, 255, 255, 0.15);
}
