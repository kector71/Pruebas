<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Catálogo avanzado de pastillas de freno. Busca por OEM, FMSI, medidas, marca, modelo y más." />
    <meta name="theme-color" content="#00d4ff" />
    
    <!-- Open Graph / SEO -->
    <meta property="og:title" content="BrakeX - Catálogo de Pastillas de Freno" />
    <meta property="og:description" content="Búsqueda rápida por OEM, FMSI, medidas, marca y más." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://brakexadmin.firebaseapp.com" />
    <meta property="og:image" content="/icon-512.png" />
    <meta name="twitter:card" content="summary_large_image" />

    <title>BrakeX - Catálogo de Pastillas de Freno</title>

    <!-- Favicon & PWA -->
    <link rel="icon" href="/icon-192.png" sizes="192x192" />
    <link rel="apple-touch-icon" href="/icon-192.png" />
    <link rel="manifest" href="/manifest.json" />

    <!-- SVG Namespace (W3C) -->
    <link rel="prefetch" href="http://www.w3.org/2000/svg" />

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css" />

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="header-x" id="headerX">
        <button id="menuBtn" class="menu-btn" aria-label="Abrir menú" aria-expanded="false">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>
        <h1>BrakeX</h1>
        <div class="header-actions">
            <button id="darkBtn" aria-label="Activar modo oscuro" aria-pressed="false">
                <span class="lp-icon-sun">Sun</span>
                <span class="lp-icon-moon">Moon</span>
            </button>
            <button id="orbitalBtn" aria-label="Modo orbital" aria-pressed="false">Orbit</button>
        </div>
    </header>

    <!-- Side Menu -->
    <div id="side-menu-overlay" class="side-menu-overlay"></div>
    <aside id="side-menu" class="side-menu" aria-hidden="true">
        <div class="side-menu-header">
            <h2>Menú</h2>
            <button id="menuCloseBtn" class="close-btn" aria-label="Cerrar menú">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        <nav class="side-menu-nav">
            <a href="#" id="open-guide-link">Guía de Uso</a>
            <a href="#" id="about-link">Acerca de</a>
            <a href="mailto:soporte@brakex.com">Soporte</a>
        </nav>
    </aside>

    <!-- Main Search -->
    <main class="main-container">
        <section class="search-section">
            <div id="searchContainer" class="search-container">
                <input
                    type="text"
                    id="busquedaRapida"
                    placeholder="Buscar por OEM, FMSI, referencia, vehículo..."
                    aria-label="Búsqueda rápida"
                    autocomplete="off"
                />
                <datalist id="marcas"></datalist>
                <datalist id="modelos"></datalist>
                <datalist id="anios"></datalist>
                <datalist id="oemList"></datalist>
                <datalist id="fmsiList"></datalist>
            </div>

            <!-- Filters -->
            <div class="filters-grid">
                <input type="text" id="filtroMarca" list="marcas" placeholder="Marca" />
                <input type="text" id="filtroModelo" list="modelos" placeholder="Modelo" />
                <input type="text" id="filtroAnio" list="anios" placeholder="Año" />
                <input type="text" id="filtroOem" list="oemList" placeholder="OEM" />
                <input type="text" id="filtroFmsi" list="fmsiList" placeholder="FMSI" />
                <input type="number" id="medidasAncho" placeholder="Ancho (mm)" min="0" step="0.1" />
                <input type="number" id="medidasAlto" placeholder="Alto (mm)" min="0" step="0.1" />
                
                <div class="position-filters">
                    <button id="positionDelantera" class="pos-btn">Delantera</button>
                    <button id="positionTrasera" class="pos-btn">Trasera</button>
                </div>

                <button id="clearFiltersBtn" class="clear-btn" aria-label="Limpiar filtros">
                    <div class="trash-lid"></div>
                    <div class="trash-body"></div>
                </button>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button id="filtroFavoritosBtn" aria-pressed="false">Favoritos</button>
                <button id="historialBtn" aria-pressed="false">Historial</button>
            </div>

            <!-- Search History -->
            <div id="searchHistoryCard" class="search-history-card" style="display:none;">
                <div id="searchHistoryContainer"></div>
            </div>

            <!-- Brand Tags -->
            <div id="brand-tags-container" class="brand-tags"></div>
            <div id="manufacturer-tags-container" class="manufacturer-tags"></div>
        </section>

        <!-- Results -->
        <section id="results-header-card" class="results-header-card">
            <div id="result-count-container" class="result-count">Cargando...</div>
            <button id="upBtn" class="up-btn" aria-label="Volver arriba">Up</button>
        </section>

        <section id="results-container" class="results-grid"></section>
        <div id="pagination-container" class="pagination"></div>
    </main>

    <!-- Footer -->
    <footer id="footerBanner" class="footer">
        <p>BrakeX © 2025 | <a href="#">Términos</a> | <a href="#">Privacidad</a></p>
    </footer>

    <!-- Modal: Card Detail -->
    <div id="card-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-content">
            <button class="modal-close-btn" aria-label="Cerrar modal">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>

            <div class="modal-image-carousel" id="modalCarousel"></div>
            <div id="modalCounterWrapper" class="modal-counter-wrapper"></div>

            <div id="modalRef" class="modal-ref"></div>
            <div id="modalPosition" class="modal-position"></div>

            <div id="modalDetailsWrapper" class="modal-details-wrapper">
                <div id="modalDetailsContent" class="modal-details-content">
                    <div id="modalAppsSpecs" class="modal-apps-specs"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Guide -->
    <div id="guide-modal" class="modal" role="dialog" aria-modal="true">
        <div class="modal-content">
            <button class="modal-close-btn" aria-label="Cerrar guía">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <div class="guide-content">
                <h2>Cómo usar BrakeX</h2>
                <p><strong>Búsqueda rápida:</strong> Escribe OEM, FMSI o referencia.</p>
                <p><strong>Filtros:</strong> Marca, modelo, año, medidas...</p>
                <p><strong>Favoritos:</strong> Haz clic en el corazón.</p>
                <p><strong>Modal:</strong> Toca una tarjeta para ver detalles.</p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>

    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('SW registrado', reg))
                    .catch(err => console.log('SW error', err));
            });
        }
    </script>
</body>
</html>